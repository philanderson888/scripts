2024-04-28 script output



drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 18:46 kubectl
-rw-rw-r--  1 azureuser azureuser   31 Apr 28 18:49 myScript.sh
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 18:48 nohup
-rwxrwxrwx  1 azureuser azureuser  23K Apr 28 18:48 output.txt
-rw-r--r--  1 azureuser azureuser  572 Apr 28 18:45 script-41-server.js
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 18:47 terraform-052-021
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 18:47 terraform-nginx-on-docker
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 18:45 vue25140
drwxrwxr-x  7 azureuser azureuser 4.0K Apr 28 18:45 vue25150






... waiting 2 minutes then deleting all servers and all resource groups so we start from scratch every time ...
=====================================================================
====                  delete resource groups                     ====
====                         10:33
=====================================================================
resource group names are ...
NetworkWatcherRG
ResourceGroup02
NetworkWatcherRG
ResourceGroup02
found a resource group ... with name ... ResourceGroup02
=====================================================================
====                   azure script ended                        ====
====                         13:50
====                  unix time 1714330462
Sun Apr 28 19:54:22 2024
=====================================================================
➜  awsWindows git:(master) ✗ ./scriptMasterWindows.sh

screen cleared



shell running on mac
/bin/zsh
zsh 5.9 (x86_64-apple-darwin23.0)



==============================================================
==============================================================
==============================================================
====                      azure                           ====
====                build windows server                  ====
====                 build ubuntu server                  ====
====               run web servers on both                ====
====        script starts at unix time Sun Apr 28 20:44:23 2024
echo ==== script starts at Sun Apr 28 20:44:23 2024
==============================================================
==============================================================
==============================================================
==============================================================
====                  set functions                       ====
==============================================================
user azureuser
pass ...
==================================================================
====             aws client is already installed              ====
==================================================================
=======================================================================
====                 powershell is already installed               ====
=======================================================================
==============================================================
====                waypoint 01 installing aws and powershell
====                         0:01
==============================================================
aws cli already installed of version aws-cli/2.15.21
powershell version PowerShell 7.4.1 already installed
=======================================================================
====                          already logged in to azure portal        =============
=======================================================================



==============================================================
====                waypoint 02 log in to azure
====                         0:01
==============================================================
aws cli already installed of version aws-cli/2.15.21
powershell version PowerShell 7.4.1 already installed
=============================================================
====                  azure status                       ====
=============================================================
azure logged in account is ...
philanderson888@hotmail.com



=============================================================
====                 azure account list                  ====
=============================================================
Name           CloudName    TenantId
-------------  -----------  ------------------------------------
Pay-As-You-Go  AzureCloud   84db59c8-e4f2-4a8b-9c4a-2f6be457ceba



==============================================================
====                waypoint 03 query azure
====                         0:01
==============================================================
aws cli already installed of version aws-cli/2.15.21
powershell version PowerShell 7.4.1 already installed
==============================================================
====        rebuilding from scratch every time            ====
==============================================================
tearing down and building up from scratch every time
... remove any resource groups if they contain the name Resource Group
... parse the number of the last known resource group
... add one
... create a fresh resource group with the new number incremented by one
... create fresh servers from scratch each time
==============================================================
==============================================================
====                list resource groups                  ====
==============================================================
NetworkWatcherRG
==============================================================
====                get next resource group               ====
==============================================================
putting into an array

for each resource group in list of resource groups

NetworkWatcherRG
NetworkWatcherRG
resource group new name is invalid
==============================================================
====                waypoint 04 clean environment
====                         0:03
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
==============================================================
====                            create resource group         =============
==============================================================
creating resource group ResourceGroup02 in uk south region
{
  "id": "/subscriptions/29a6dc31-f2c3-4caa-a935-2a7158618df5/resourceGroups/ResourceGroup02",
  "location": "uksouth",
  "managedBy": null,
  "name": "ResourceGroup02",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null,
  "type": "Microsoft.Resources/resourceGroups"
}



resource group ResourceGroup02 was just created, so servers have to be created also



==============================================================
====                waypoint 05 create resource group
====                         0:04
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
=====================================================================
====                  list resource groups                       ====
=====================================================================
Resource          Name
----------------  ----------------------
NetworkWatcherRG  NetworkWatcher_uksouth
=====================================================================
====                   get resource group                        ====
=====================================================================
resource group names are ...
NetworkWatcherRG
ResourceGroup02
resource group ResourceGroup02 will be used to build servers in



==============================================================
====                waypoint 06 list resource groups
====                         0:05
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
=====================================================================
====     vm templates >> output-azure-vm-image-templates.txt     ====
=====================================================================
find all Gen2 SKUs published by Microsoft Windows Desktop - output to output-azure-vm-image-templates.txt
find all Gen2 SKUs published by Microsoft Windows Desktop - output to output-azure-vm-image-templates.txt
find all Gen2 SKUs published by Canonical - output to output-azure-vm-image-templates.txt
find all images - output to output-azure-vm-image-templates.txt
azure image templates to use are
- valid image URN
- custom image name
- custom image id
- VHD blob URI
- image from
- CentOS85Gen2
- Debian11
- FlatcarLinuxFreeGen2
- OpenSuseLeap154Gen2
- RHELRaw8LVMGen2
- SuseSles15SP3
- Ubuntu2204
- Win2022Datacenter
- Win2022AzureEditionCore
==============================================================
====                waypoint 07 query vm templates
====                         0:05
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
==============================================================
====                waypoint 09 set vm type to be ubuntu
====                         0:05
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
=======================================================================
====             create vm ubuntuVm01 using image Ubuntu2204
====                         0:05
=======================================================================
{
  "fqdns": "",
  "id": "/subscriptions/29a6dc31-f2c3-4caa-a935-2a7158618df5/resourceGroups/ResourceGroup02/providers/Microsoft.Compute/virtualMachines/ubuntuVm01",
  "location": "uksouth",
  "macAddress": "60-45-BD-11-7B-AA",
  "powerState": "VM running",
  "privateIpAddress": "10.0.0.4",
  "publicIpAddress": "51.143.142.33",
  "resourceGroup": "ResourceGroup02",
  "zones": ""
}



==============================================================
====                waypoint 10 vm created
====                         0:40
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip



==============================================================
==============================================================
====                     query vm ubuntuVm01               
====                         0:40
==============================================================
==============================================================



resource group name ResourceGroup02
vm id is /subscriptions/29a6dc31-f2c3-4caa-a935-2a7158618df5/resourceGroups/VMResources/providers/Microsoft.Compute/virtualMachines/ubuntuVm01
machine id c0e756bb-4ef4-4b53-8fe0-0aac13429259
user name azureuser
ubuntu computer name ubuntuVm01
ubuntu vm id hash ... c0e756bb-4ef4-4b53-8fe0-0aac13429259
ubuntu vm size ... Standard_DS1_v2
ubuntu vm network id is /subscriptions/29a6dc31-f2c3-4caa-a935-2a7158618df5/resourceGroups/ResourceGroup02/providers/Microsoft.Network/networkInterfaces/ubuntuVm01VMNic
network card name ubuntuVm01VMNic
ubuntu vm public ip is 51.143.142.33
ubuntu vm private ip is 10.0.0.4
network card mac address 60-45-BD-11-7B-AA
resource group name ResourceGroup02
resource group location uksouth
resource group id d4923b5d-1da4-4f6e-9730-b7d7e3b0147d
==============================================================
====                waypoint 11 query vm using azure cli
====                         0:51
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
=====================================================================
====               query network security group                  ====
====        output sent to ./output-network-security-group.txt   ====
=====================================================================
==============================================================
====                waypoint 12 query network security group performed
====                         0:51
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried



==============================================================
==============================================================
====                    who am i USER
====                         0:51
==============================================================
==============================================================



Warning: Permanently added '51.143.142.33' (ED25519) to the list of known hosts.
username azureuser



==============================================================
==============================================================
====                    get remote shell
====                         0:53
==============================================================
==============================================================






==============================================================
==============================================================
====                     query linux
====                         0:54
==============================================================
==============================================================



=======================================================================
====                          shell 01310                          ====
=======================================================================
shell in use on remote machine is /bin/bash
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)



touch output.txt 01310



chmod 777 output.txt



=======================================================================
====                     linux version 01320                       ====
=======================================================================
running a case statement on /etc/os-release against the option 'ID'
This is Ubuntu Linux
==================================================================
====              update ubuntu of type debian 01330
==================================================================
==============================================================
====              apt-get install nginx 01340
==============================================================
==============================================================
====                    nginx version 01350               ====
==============================================================
keep sleep 1
==============================================================
====               update various services 013-077        ====
==============================================================
aaa
nginx version: nginx/1.18.0 (Ubuntu)
aaa
aaa



which shell am i using
/bin/bash



shell version
GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.



touch output.txt 04-015



chmod 777 output.txt



ls -lah output.txt
-rwxrwxrwx 1 azureuser azureuser 12K Apr 28 19:46 output.txt


echo output.txt into output.txt



tail output.txt
Running kernel seems to be up-to-date.

No services need to be restarted.

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
this is the end of the output file



=======================================================================
====          which flavour of linux is this machine 04010         ====
=======================================================================
running a case statement on /etc/os-release against the option 'ID'
still to add in the fedora case
This is Ubuntu Linux



echo lsb_release -si
Ubuntu



examining case /usr/bin/lsb_release -si to get os name eg ubuntu and id_like eg debian
still to add in the fedora case
ubuntu



=======================================================================
====                operating system type 04050                    ====
=======================================================================



id like
debian



operating system type
ubuntu_distribution
ubuntu operating system



cat /etc/os-release
PRETTY_NAME="Ubuntu 22.04.4 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.4 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy



This is Debian Linux => of which Ubuntu is a flavour



linux os name in /etc/os-release
NAME="Ubuntu"



linux os name and version with quotes from awk - F = /^NAME/{print $2} /etc/os-release
Ubuntu"



linux os name and version without quotes
Ubuntu



linux os name and version 2 with PRETTY_NAME from /etc/os-release
PRETTY_NAME="Ubuntu 22.04.4 LTS"



echo linux os name and version 2 with quotes
. . . from - awk - F =/PRETTY_NAME/ { print $ 2 } /etc/os-release
"Ubuntu 22.04.4 LTS"



linux os name and version without quotes - 1 - lsb_release - d | awk - F \t  { print $ 2}
Ubuntu 22.04.4 LTS
linux os name and version without quotes - 2 - lsb_release -sd
Ubuntu 22.04.4 LTS



linux version number and friendly name with VERSION from /etc/os-release
VERSION="22.04.4 LTS (Jammy Jellyfish)"



linux version major minor revision with VERSION_ID from /etc/os-release
VERSION_ID="22.04"



linux version major minor lsb_release -sr
22.04



linux VERSION_CODENAME in /etc/os-release
VERSION_CODENAME=jammy



linux ID_LIKE in /etc/os-release
ID_LIKE=debian



lsb_release - d | awk {print $ 3}
22.04.4



lsb_release -a
Distributor ID:	Ubuntu
Description:	Ubuntu 22.04.4 LTS
Release:	22.04
Codename:	jammy
No LSB modules are available.



cat /etc/*release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=22.04
DISTRIB_CODENAME=jammy
DISTRIB_DESCRIPTION="Ubuntu 22.04.4 LTS"
PRETTY_NAME="Ubuntu 22.04.4 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.4 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy




ls /etc/*release*
-rw-r--r-- 1 root root 104 Feb 14 14:47 lsb-release
lrwxrwxrwx 1 root root  21 Feb 14 14:47 os-release -> ../usr/lib/os-release
-rw-r--r-- 1 root root 104 Feb 14 14:47 /etc/lsb-release
lrwxrwxrwx 1 root root  21 Feb 14 14:47 /etc/os-release -> ../usr/lib/os-release



if its a lsb release then run apt-get
if [ -f /etc/lsb-release ]; then apt-get update fi 
its ubuntu !?



uname = unix name
Linux



uname in lower case
linux



echo uname -a .... full complex linux kernel version ...
-a
Linux ubuntuVm01 6.5.0-1018-azure #19~22.04.2-Ubuntu SMP Thu Mar 21 16:45:46 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux


uname -srm .... linux kernel short version ...
this is useful - export this one
Linux 6.5.0-1018-azure x86_64



distribution is Ubuntu



distribution in lower case is
ubuntu operating system



linux os details
/etc/os-release ... /usr/lib/os-release
PRETTY_NAME="Ubuntu 22.04.4 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.4 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy
linux pretty name is PRETTY_NAME="Ubuntu 22.04.4 LTS"



virtualization details of the amazon vm host and os
hostnamectl
bash: line 312: DISTRO: command not found
 Static hostname: ubuntuVm01
       Icon name: computer-vm
         Chassis: vm
      Machine ID: a38da24c73b8472fa033eaa32bae63ba
         Boot ID: ef1f3afc28fd41b3866354151c19ec7e
  Virtualization: microsoft
Operating System: Ubuntu 22.04.4 LTS
          Kernel: Linux 6.5.0-1018-azure
    Architecture: x86-64
 Hardware Vendor: Microsoft Corporation
  Hardware Model: Virtual Machine
=======================================================================
==== if id_like=debian then sudo apt-get update/upgrade 04300      ====
=======================================================================



=======================================================================
====                   apt-get update 04310                        ====
=======================================================================
apt-get update silent
=======================================================================
====                  apt-get upgrade 04320                        ====
=======================================================================
apt-get upgrade silent
Preconfiguring packages ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../bsdutils_1%3a2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking bsdutils (1:2.37.2-4ubuntu3.4) over (1:2.37.2-4ubuntu3.3) ...
Setting up bsdutils (1:2.37.2-4ubuntu3.4) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../util-linux_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking util-linux (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Setting up util-linux (2.37.2-4ubuntu3.4) ...
fstrim.service is a disabled or a static unit not running, not starting it.
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../libc6_2.35-0ubuntu3.7_amd64.deb ...
Unpacking libc6:amd64 (2.35-0ubuntu3.7) over (2.35-0ubuntu3.6) ...
Setting up libc6:amd64 (2.35-0ubuntu3.7) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../libc-bin_2.35-0ubuntu3.7_amd64.deb ...
Unpacking libc-bin (2.35-0ubuntu3.7) over (2.35-0ubuntu3.6) ...
Setting up libc-bin (2.35-0ubuntu3.7) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../mount_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking mount (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../libsmartcols1_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking libsmartcols1:amd64 (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Setting up libsmartcols1:amd64 (2.37.2-4ubuntu3.4) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../libuuid1_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking libuuid1:amd64 (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Setting up libuuid1:amd64 (2.37.2-4ubuntu3.4) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../uuid-runtime_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking uuid-runtime (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../openssh-sftp-server_1%3a8.9p1-3ubuntu0.7_amd64.deb ...
Unpacking openssh-sftp-server (1:8.9p1-3ubuntu0.7) over (1:8.9p1-3ubuntu0.6) ...
Preparing to unpack .../openssh-server_1%3a8.9p1-3ubuntu0.7_amd64.deb ...
Unpacking openssh-server (1:8.9p1-3ubuntu0.7) over (1:8.9p1-3ubuntu0.6) ...
Preparing to unpack .../openssh-client_1%3a8.9p1-3ubuntu0.7_amd64.deb ...
Unpacking openssh-client (1:8.9p1-3ubuntu0.7) over (1:8.9p1-3ubuntu0.6) ...
Preparing to unpack .../libblkid1_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking libblkid1:amd64 (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Setting up libblkid1:amd64 (2.37.2-4ubuntu3.4) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../libmount1_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking libmount1:amd64 (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Setting up libmount1:amd64 (2.37.2-4ubuntu3.4) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../libgnutls30_3.7.3-4ubuntu1.5_amd64.deb ...
Unpacking libgnutls30:amd64 (3.7.3-4ubuntu1.5) over (3.7.3-4ubuntu1.4) ...
Setting up libgnutls30:amd64 (3.7.3-4ubuntu1.5) ...
(Reading database ... 62461 files and directories currently installed.)
Preparing to unpack .../00-eject_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking eject (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../01-locales_2.35-0ubuntu3.7_all.deb ...
Unpacking locales (2.35-0ubuntu3.7) over (2.35-0ubuntu3.6) ...
Preparing to unpack .../02-ubuntu-pro-client-l10n_31.2.2~22.04_amd64.deb ...
Unpacking ubuntu-pro-client-l10n (31.2.2~22.04) over (31.2~22.04) ...
Preparing to unpack .../03-ubuntu-pro-client_31.2.2~22.04_amd64.deb ...
Unpacking ubuntu-pro-client (31.2.2~22.04) over (31.2~22.04) ...
Preparing to unpack .../04-ubuntu-advantage-tools_31.2.2~22.04_all.deb ...
Unpacking ubuntu-advantage-tools (31.2.2~22.04) over (31.2~22.04) ...
Preparing to unpack .../05-bsdextrautils_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking bsdextrautils (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../06-libnghttp2-14_1.43.0-1ubuntu0.2_amd64.deb ...
Unpacking libnghttp2-14:amd64 (1.43.0-1ubuntu0.2) over (1.43.0-1ubuntu0.1) ...
Preparing to unpack .../07-libfdisk1_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking libfdisk1:amd64 (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../08-fdisk_2.37.2-4ubuntu3.4_amd64.deb ...
Unpacking fdisk (2.37.2-4ubuntu3.4) over (2.37.2-4ubuntu3.3) ...
Preparing to unpack .../09-klibc-utils_2.0.10-4ubuntu0.1_amd64.deb ...
Unpacking klibc-utils (2.0.10-4ubuntu0.1) over (2.0.10-4) ...
Preparing to unpack .../10-libklibc_2.0.10-4ubuntu0.1_amd64.deb ...
Unpacking libklibc:amd64 (2.0.10-4ubuntu0.1) over (2.0.10-4) ...
Preparing to unpack .../11-libnspr4_2%3a4.35-0ubuntu0.22.04.1_amd64.deb ...
Unpacking libnspr4:amd64 (2:4.35-0ubuntu0.22.04.1) over (2:4.32-3build1) ...
Preparing to unpack .../12-libnss3_2%3a3.98-0ubuntu0.22.04.2_amd64.deb ...
Unpacking libnss3:amd64 (2:3.98-0ubuntu0.22.04.2) over (2:3.68.2-0ubuntu1.2) ...
Preparing to unpack .../13-linux-cloud-tools-common_5.15.0-105.115_all.deb ...
Unpacking linux-cloud-tools-common (5.15.0-105.115) over (5.15.0-102.112) ...
Preparing to unpack .../14-linux-tools-common_5.15.0-105.115_all.deb ...
Unpacking linux-tools-common (5.15.0-105.115) over (5.15.0-102.112) ...
Preparing to unpack .../15-cloud-init_24.1.3-0ubuntu1~22.04.1_all.deb ...
Unpacking cloud-init (24.1.3-0ubuntu1~22.04.1) over (23.4.4-0ubuntu0~22.04.1) ...
Setting up cloud-init (24.1.3-0ubuntu1~22.04.1) ...
Installing new version of config file /etc/cloud/cloud.cfg ...
Installing new version of config file /etc/cloud/cloud.cfg.d/05_logging.cfg ...
Installing new version of config file /etc/cloud/templates/chrony.conf.cos.tmpl ...
Installing new version of config file /etc/cloud/templates/chrony.conf.debian.tmpl ...
Installing new version of config file /etc/cloud/templates/chrony.conf.ubuntu.tmpl ...
Installing new version of config file /etc/cloud/templates/hosts.alpine.tmpl ...
Installing new version of config file /etc/cloud/templates/hosts.mariner.tmpl ...
Installing new version of config file /etc/cloud/templates/ntp.conf.ubuntu.tmpl ...
Installing new version of config file /etc/cloud/templates/sources.list.ubuntu.deb822.tmpl ...
Installing new version of config file /etc/profile.d/Z99-cloud-locale-test.sh ...
Removing obsolete conffile /etc/cloud/clean.d/README ...
Setting up bsdextrautils (2.37.2-4ubuntu3.4) ...
Setting up openssh-client (1:8.9p1-3ubuntu0.7) ...
Setting up libnghttp2-14:amd64 (1.43.0-1ubuntu0.2) ...
Setting up linux-cloud-tools-common (5.15.0-105.115) ...
Setting up locales (2.35-0ubuntu3.7) ...
Generating locales (this might take a while)...
  en_US.UTF-8... done
Generation complete.
Setting up eject (2.37.2-4ubuntu3.4) ...
Setting up libklibc:amd64 (2.0.10-4ubuntu0.1) ...
Setting up libnspr4:amd64 (2:4.35-0ubuntu0.22.04.1) ...
Setting up libfdisk1:amd64 (2.37.2-4ubuntu3.4) ...
Setting up mount (2.37.2-4ubuntu3.4) ...
Setting up uuid-runtime (2.37.2-4ubuntu3.4) ...
uuidd.service is a disabled or a static unit not running, not starting it.
Setting up klibc-utils (2.0.10-4ubuntu0.1) ...
Setting up linux-tools-common (5.15.0-105.115) ...
Setting up ubuntu-pro-client (31.2.2~22.04) ...
Setting up ubuntu-pro-client-l10n (31.2.2~22.04) ...
Setting up openssh-sftp-server (1:8.9p1-3ubuntu0.7) ...
Setting up openssh-server (1:8.9p1-3ubuntu0.7) ...
rescue-ssh.target is a disabled or a static unit not running, not starting it.
ssh.socket is a disabled or a static unit not running, not starting it.
Setting up libnss3:amd64 (2:3.98-0ubuntu0.22.04.2) ...
Setting up fdisk (2.37.2-4ubuntu3.4) ...
Setting up ubuntu-advantage-tools (31.2.2~22.04) ...
Processing triggers for libc-bin (2.35-0ubuntu3.7) ...
Processing triggers for rsyslog (8.2112.0-2ubuntu2.2) ...
Processing triggers for ufw (0.36.1-4ubuntu0.1) ...
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for initramfs-tools (0.140ubuntu13.4) ...
update-initramfs: Generating /boot/initrd.img-6.5.0-1018-azure

Running kernel seems to be up-to-date.

Services to be restarted:
 systemctl restart chrony.service
 systemctl restart cron.service
 systemctl restart multipathd.service
 systemctl restart nginx.service
 systemctl restart packagekit.service
 systemctl restart polkit.service
 systemctl restart serial-getty@ttyS0.service
 systemctl restart snapd.service
 systemctl restart systemd-journald.service
 /etc/needrestart/restart.d/systemd-manager
 systemctl restart systemd-networkd.service
 systemctl restart systemd-resolved.service
 systemctl restart systemd-udevd.service
 systemctl restart walinuxagent.service

Service restarts being deferred:
 /etc/needrestart/restart.d/dbus.service
 systemctl restart getty@tty1.service
 systemctl restart networkd-dispatcher.service
 systemctl restart systemd-logind.service
 systemctl restart unattended-upgrades.service
 systemctl restart user@1000.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.



nginx -v
nginx version: nginx/1.18.0 (Ubuntu)



=======================================================================
====           update various services 04330                       ====
=======================================================================
gett nginx version using system control restart journal d service wow
=======================================================================
====          apt-get install gcc 04340                            ====
=======================================================================
Job for user@1000.service failed because the control process exited with error code.
See "systemctl status user@1000.service" and "journalctl -xeu user@1000.service" for details.
bash: line 458: output.txt: Permission denied
=======================================================================
====             apt-get install fish 04350                        ====
=======================================================================
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Get:5 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease [17.6 kB]
Get:6 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy/main amd64 Packages [580 B]
Get:7 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy/main Translation-en [288 B]
Fetched 18.4 kB in 1s (23.1 kB/s)
Reading package lists...
Repository: 'deb https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu/ jammy main'
Description:
This archive contains releases made from the Fish 3.x series.

To install fish, run the following commands:

sudo apt-add-repository ppa:fish-shell/release-3
sudo apt update
sudo apt install fish
More info: https://launchpad.net/~fish-shell/+archive/ubuntu/release-3
Adding repository.
Adding deb entry to /etc/apt/sources.list.d/fish-shell-ubuntu-release-3-jammy.list
Adding disabled deb-src entry to /etc/apt/sources.list.d/fish-shell-ubuntu-release-3-jammy.list
Adding key to /etc/apt/trusted.gpg.d/fish-shell-ubuntu-release-3.gpg with fingerprint 59FDA1CE1B84B3FAD89366C027557F056DC33CA5
bash: line 464: output.txt: Permission denied
bash: line 465: output.txt: Permission denied



what is this
apt-get -v
apt 2.4.12 (amd64)
Supported modules:
*Ver: Standard .deb
 Pkg:  Debian APT solver interface (Priority -1000)
 Pkg:  Debian APT planner interface (Priority -1000)
*Pkg:  Debian dpkg interface (Priority 30)
 S.L: 'deb' Debian binary tree
 S.L: 'deb-src' Debian source tree
 Idx: EDSP scenario file
 Idx: EIPP scenario file
 Idx: Debian Source Index
 Idx: Debian Package Index
 Idx: Debian Translation Index
 Idx: Debian dpkg status file
 Idx: Debian deb file
 Idx: Debian dsc file
 Idx: Debian control file



apt-get update
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Reading package lists...



python version
Python 3.10.12



python platform ... linux os on which python is built ....
Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
=====================================================================
====            query linux ... complete 04500                   ====
=====================================================================

==============================================================
====                waypoint 13 query linux
====                         2:40
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35



==============================================================
==============================================================
====                   dnf install
====                         2:40
==============================================================
==============================================================



=======================================================================
====                          shell                                ====
=======================================================================
shell in use on remote machine is /bin/bash
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
=======================================================================
====                        linux version                          ====
=======================================================================
running a case statement on /etc/os-release against the option 'ID'
This is Ubuntu Linux
==================================================================
====              update ubuntu of type debian 2
==================================================================
==============================================================
====              apt-get install nginx  2                ====
====                 * * * silent * * *                   ====
==============================================================
==============================================================
====               update various services                ====
==============================================================
==============================================================
====                   install dnf                        ====
==============================================================
do not install dnf on ubuntu
==============================================================
====                waypoint 14 dnf install
====                         2:42
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35



==============================================================
==============================================================
====                   update os
====                         2:42
==============================================================
==============================================================



shell /bin/bash
==============================================================
====                    update vm                         ====
==============================================================
==============================================================
====          which flavour of linux is this machine      ====
==============================================================
running a case statement on /etc/os-release against the option 'ID'
This is Ubuntu Linux






=====================================================================
====              update ubuntu which is of type debian
=====================================================================
=====================================================================
====                    apt-get update                           ====
====                  * * * silent * * *                         ====
=====================================================================
=====================================================================
====                    apt-get upgrade                          ====
=====================================================================
=================================================================
====                       python                            ====
=================================================================
python version
Python 3.10.12



python platform ... linux os on which python is built ....
Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
===============================================================
====          update and upgrade linux complete            ====
===============================================================
==============================================================
====                waypoint 16 os updated
====                         2:47
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
==============================================================
====                waypoint 17 deciding which services to install
====                         2:47
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
the following services will be installed ...
    apache
    nginx
    services restarted
    node
    express



==============================================================
==============================================================
====                       zsh                            ====
====                         2:47
==============================================================
==============================================================



=======================================================================
====            apt-get install zsh 18020                          ====
=======================================================================
cd /home/azureuser



Reading package lists...
Building dependency tree...
Reading state information...
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
apt-get install dialog
Reading package lists...
Building dependency tree...
Reading state information...
dialog is already the newest version (1.3-20211214-1).
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
apt-get install apt-utils
Reading package lists...
Building dependency tree...
Reading state information...
apt-utils is already the newest version (2.4.12).
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
apt-get install zsh
usage: sudo -h | -K | -k | -V
usage: sudo -v [-ABknS] [-g group] [-h host] [-p prompt] [-u user]
usage: sudo -l [-ABknS] [-g group] [-h host] [-p prompt] [-U user] [-u user]
            [command]
usage: sudo [-ABbEHknPS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user]
     touch ./.oh-my-zsh



ls
output.txt



force zsh to always run every time by amending .bashrc file
cat script-18-always-run-zsh.sh






cat .bashrc
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# If not running interactively, don't do anything
case $- in
    *i*) ;;
      *) return;;
esac

# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth

# append to the history file, don't overwrite it
shopt -s histappend

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000
HISTFILESIZE=2000

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize

# If set, the pattern "**" used in a pathname expansion context will
# match all files and zero or more directories and subdirectories.
#shopt -s globstar

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# set variable identifying the chroot you work in (used in the prompt below)
if [ -z "${debian_chroot:-}" ] && [ -r /etc/debian_chroot ]; then
    debian_chroot=$(cat /etc/debian_chroot)
fi

# set a fancy prompt (non-color, unless we know we "want" color)
case "$TERM" in
    xterm-color|*-256color) color_prompt=yes;;
esac

# uncomment for a colored prompt, if the terminal has the capability; turned
# off by default to not distract the user: the focus in a terminal window
# should be on the output of commands, not on the prompt
#force_color_prompt=yes

if [ -n "$force_color_prompt" ]; then
    if [ -x /usr/bin/tput ] && tput setaf 1 >&/dev/null; then
	# We have color support; assume it's compliant with Ecma-48
	# (ISO/IEC-6429). (Lack of such support is extremely rare, and such
	# a case would tend to support setf rather than setaf.)
	color_prompt=yes
    else
	color_prompt=
    fi
fi

if [ "$color_prompt" = yes ]; then
    PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
else
    PS1='${debian_chroot:+($debian_chroot)}\u@\h:\w\$ '
fi
unset color_prompt force_color_prompt

# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PS1="\[\e]0;${debian_chroot:+($debian_chroot)}\u@\h: \w\a\]$PS1"
    ;;
*)
    ;;
esac

# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    #alias dir='dir --color=auto'
    #alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# colored GCC warnings and errors
#export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'

# some more ls aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Add an "alert" alias for long running commands.  Use like so:
#   sleep 10; alert
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# Alias definitions.
# You may want to put all your additions into a separate file like
# ~/.bash_aliases, instead of adding them here directly.
# See /usr/share/doc/bash-doc/examples in the bash-doc package.

if [ -f ~/.bash_aliases ]; then
    . ~/.bash_aliases
fi

# enable programmable completion features (you don't need to enable
# this, if it's already enabled in /etc/bash.bashrc and /etc/profile
# sources /etc/bash.bashrc).
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi
cat script-18-always-run-zsh.sh



echo shell
/bin/bash



shell version
GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
which zsh
/usr/bin/zsh
set as default
       [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-ABknS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user] file ...
usage: sudo -h | -K | -k | -V
usage: sudo -v [-ABknS] [-g group] [-h host] [-p prompt] [-u user]
usage: sudo -l [-ABknS] [-g group] [-h host] [-p prompt] [-U user] [-u user]
            [command]
usage: sudo [-ABbEHknPS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user]
            [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-ABknS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user] file ...
usage: sudo -h | -K | -k | -V
usage: sudo -v [-ABknS] [-g group] [-h host] [-p prompt] [-u user]
usage: sudo -l [-ABknS] [-g group] [-h host] [-p prompt] [-U user] [-u user]
            [command]
usage: sudo [-ABbEHknPS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user]
            [VAR=value] [-i|-s] [<command>]
usage: sudo -e [-ABknS] [-r role] [-t type] [-C num] [-D directory] [-g group]
            [-h host] [-p prompt] [-R directory] [-T timeout] [-u user] file ...
cat: script-18-always-run-zsh.sh: No such file or directory
cat: script-18-always-run-zsh.sh: No such file or directory



zsh - setting zsh as the shell - but does it work



shell
/bin/bash



shell version
GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2020 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.



which zsh
/usr/bin/zsh



whereis zsh
zsh: /usr/bin/zsh /usr/lib/x86_64-linux-gnu/zsh /etc/zsh /usr/share/zsh /usr/share/man/man1/zsh.1.gz



zsh version
zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
=====================================================================
====                set zsh as default shell                     ====
=====================================================================



if on fedora use this command
If you use lchsh you need to type /bin/zsh to make it your default shell.
Log out and log back in again to use your new default shell.
Test that it worked with echo /bin/bash. Expected result: /bin/zsh or similar
Test with /bin/bash --version. Expected result: zsh 5.8 or similar



has the shell changed - let us see
shell
/bin/bash
sudo: lchsh: command not found
==============================================================
====                waypoint 18 zsh
====                         2:56
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)



==============================================================
==============================================================
====          fish friendly interactive shell             ====
====                         2:56
==============================================================
==============================================================



fish version fish, version 3.7.1
==============================================================
====                waypoint 19 fish
====                         3:09
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1



==============================================================
==============================================================
====                         git                          ====
====                         3:09
==============================================================
==============================================================



git version 2.34.1
==============================================================
====                waypoint 21 git
====                         3:11
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1



==============================================================
==============================================================
====                        apache                        ====
====                         3:11
==============================================================
==============================================================



bash: line 1: apache2: command not found
==============================================================
====                waypoint 22 apache
====                         3:12
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
==============================
====      fix these       ====
==============================
apache version 



==============================================================
==============================================================
====                      nginx                           ====
====                         3:12
==============================================================
==============================================================



=======================================================================
====                 apt-get install nginx 23
finish the job - here are some links to complete the job
https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04
https://ubuntu.com/server/docs/how-to-install-nginx
=======================================================================



nginx version
nginx version: nginx/1.18.0 (Ubuntu)
==============================================================
====                waypoint 23 nginx
====                         3:15
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
==============================
====      fix these       ====
==============================
apache version 
nginx version 



==============================================================
==============================================================
====               restart services                       ====
====                         3:15
==============================================================
==============================================================



=======================================================================
====                       restart services                              ====
=======================================================================



==============================================================
==============================================================
====              node npm express                         ====
====                         3:16
==============================================================
==============================================================



zsh
cd /home/azureuser
===================================================================
====        obtaining node binaries via curl command 25020     ====
===================================================================
zsh: unmatched "
2024-04-28 19:47:40 - Installing pre-requisites
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20230311ubuntu0.22.04.1).
ca-certificates set to manually installed.
curl is already the newest version (7.81.0-1ubuntu1.16).
curl set to manually installed.
gnupg is already the newest version (2.2.27-3ubuntu2.1).
gnupg set to manually installed.
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 7 not upgraded.
Need to get 1510 B of archives.
After this operation, 170 kB of additional disk space will be used.
Get:1 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 apt-transport-https all 2.4.12 [1510 B]
Fetched 1510 B in 0s (86.4 kB/s)
Selecting previously unselected package apt-transport-https.
(Reading database ... 65510 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_2.4.12_all.deb ...
Unpacking apt-transport-https (2.4.12) ...
Setting up apt-transport-https (2.4.12) ...

Running kernel seems to be up-to-date.

Services to be restarted:
 systemctl restart chrony.service
 systemctl restart cron.service
 systemctl restart multipathd.service
 systemctl restart nginx.service
 systemctl restart packagekit.service
 systemctl restart polkit.service
 systemctl restart serial-getty@ttyS0.service
 systemctl restart snapd.service
 systemctl restart systemd-udevd.service
 systemctl restart walinuxagent.service

Service restarts being deferred:
 /etc/needrestart/restart.d/dbus.service
 systemctl restart getty@tty1.service
 systemctl restart networkd-dispatcher.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Get:6 https://deb.nodesource.com/node_20.x nodistro InRelease [12.1 kB]
Get:7 https://deb.nodesource.com/node_20.x nodistro/main amd64 Packages [6628 B]
Fetched 18.8 kB in 1s (18.3 kB/s)
Reading package lists...
2024-04-28 19:47:47 - Repository configured successfully. To install Node.js, run: apt-get install nodejs -y
note - E means 'preserve environment'
note - sudo - E will download the file then execute it with sudo commands
===================================================================
====                  install node 25030
===================================================================
v20.12.2
10.5.0
adding bash commands to zsh
===================================================================
====                  node and npm version                     ====
===================================================================
node version
v20.12.2
npm version
10.5.0
=====================================================================
====                  node run js command                        ====
=====================================================================
this is node js javascript
node version v20.12.2
node processes running
{
  node: '20.12.2',
  acorn: '8.11.3',
  ada: '2.7.6',
  ares: '1.27.0',
  base64: '0.5.2',
  brotli: '1.1.0',
  cjs_module_lexer: '1.2.2',
  cldr: '44.1',
  icu: '74.2',
  llhttp: '8.1.2',
  modules: '115',
  napi: '9',
  nghttp2: '1.60.0',
  nghttp3: '0.7.0',
  ngtcp2: '0.8.1',
  openssl: '3.0.13+quic',
  simdutf: '4.0.8',
  tz: '2024a',
  undici: '5.28.4',
  unicode: '15.1',
  uv: '1.46.0',
  uvwasi: '0.0.20',
  v8: '11.3.244.8-node.19',
  zlib: '1.3.0.1-motley-40e35a7'
}
node platform linux
node environment variables
{
  SHELL: '/bin/bash',
  PWD: '/home/azureuser',
  LOGNAME: 'azureuser',
  XDG_SESSION_TYPE: 'tty',
  MOTD_SHOWN: 'pam',
  HOME: '/home/azureuser',
  LANG: 'C.UTF-8',
  SSH_CONNECTION: '77.99.118.2 61669 10.0.0.4 22',
  XDG_SESSION_CLASS: 'user',
  USER: 'azureuser',
  SHLVL: '1',
  XDG_SESSION_ID: '29',
  XDG_RUNTIME_DIR: '/run/user/1000',
  SSH_CLIENT: '77.99.118.2 61669 22',
  PATH: '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin',
  DBUS_SESSION_BUS_ADDRESS: 'unix:path=/run/user/1000/bus',
  _: '/usr/bin/node',
  OLDPWD: '/home/azureuser'
}
=======================================================================
====                  install node complete                        ====
=======================================================================
=======================================================================
====                 download express project 25100                ====
====         git clone strongloop/express-example-app              ====
=======================================================================
mv express-example-app express
list files
CHANGES.md
LICENSE
README.md
index.js
package.json
server.js
test.js



rename the ports
cat the server file
// Copyright IBM Corp. 2015. All Rights Reserved.
// Node module: express-example-app
// This file is licensed under the MIT License.
// License text available at https://opensource.org/licenses/MIT

'use strict';

var app = require('./')();
var port = 'PORT' in process.env ? process.env.PORT : 3008;

console.log('Listening on port:', port);

app.listen(port);
=======================================================================
====               express - npm install 25110                     ====
=======================================================================
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.
npm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue
npm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142

added 313 packages, and audited 314 packages in 31s

62 packages are looking for funding
  run `npm fund` for details

13 vulnerabilities (6 moderate, 6 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
npm notice 
npm notice New minor version of npm available! 10.5.0 -> 10.6.0
npm notice Changelog: <https://github.com/npm/cli/releases/tag/v10.6.0>
npm notice Run `npm install -g npm@10.6.0` to update!
npm version using npm list express
npm notice 
express-example-app@1.0.4 /home/azureuser/express
└── express@4.19.2




=======================================================================
====                  npm start express 25120                      ====
====                   run in non-ui thread                        ====
=======================================================================
=======================================================================
====                express built but not running 25130            ====
=======================================================================
=======================================================================
====                            vue                                ====
=======================================================================
=======================================================================
====                npm install create-vue 25140                   ====
=======================================================================
mkdir vue25140
cd vue25140
npm install create-vue

added 1 package in 578ms
ls
node_modules
package-lock.json
package.json



=======================================================================
====                    git clone vue 25150                        ====
=======================================================================
git clone github kontent-ai sample-app-vue
Cloning into 'sample-app-vue'...



mv sample-app-vue vue25150



ls
LICENSE
README.md
env.d.ts
index.html
netlify.toml
package-lock.json
package.json
public
src
tsconfig.config.json
tsconfig.json
vite.config.ts



npm install
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@achrinza/node-ipc@9.2.6',
npm WARN EBADENGINE   required: {
npm WARN EBADENGINE     node: '8 || 9 || 10 || 11 || 12 || 13 || 14 || 15 || 16 || 17 || 18 || 19'
npm WARN EBADENGINE   },
npm WARN EBADENGINE   current: { node: 'v20.12.2', npm: '10.5.0' }
npm WARN EBADENGINE }
npm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort, so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility
npm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead

added 1166 packages, and audited 1167 packages in 30s

187 packages are looking for funding
  run `npm fund` for details

15 vulnerabilities (11 moderate, 3 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
=======================================================================
====             vue 25150 took 32 seconds
=======================================================================
==============================================================
====                waypoint 25 node
====                         4:42
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 



==============================================================
==============================================================
====                     express 26                        ====
====                         4:42
==============================================================
==============================================================



=======================================================================
====                  git clone express  26a                       ====
=======================================================================
ls
express
output.txt
vue25140
vue25150



move into express folder



ls
CHANGES.md
LICENSE
README.md
index.js
node_modules
package-lock.json
package.json
server.js
test.js



=======================================================================
====                   npm install express 26b                     ====
=======================================================================

up to date, audited 314 packages in 3s

62 packages are looking for funding
  run `npm fund` for details

13 vulnerabilities (6 moderate, 6 high, 1 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues possible (including breaking changes), run:
  npm audit fix --force

Some issues need review, and may require choosing
a different dependency.

Run `npm audit` for details.
list files now
CHANGES.md
LICENSE
README.md
index.js
node_modules
package-lock.json
package.json
server.js
test.js
npm version using npm list express
express-example-app@1.0.4 /home/azureuser/express
└── express@4.19.2

running express in second terminal
==============================================================
====                waypoint 26 express 2
====                         4:48
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 /home/azureuser
└── (empty)



==============================================================
==============================================================
====                    running servers                  ====
====                         4:48
==============================================================
==============================================================



==============================================================
====                run apache web server                 ====
====                         4:48
==============================================================
==============================================================
====               run nginx web server                   ====
====                         4:48
==============================================================
nginx install works ... nothing to test at present
==============================================================
====             running node web server                  ====
====                         4:48
==============================================================
script-41-server.js                                                           100%  572    19.4KB/s   00:00    
aaaa
bbbb
==============================================================
====             run express web server                   ====
====                         4:49
==============================================================
run express web server
nothing in here at present



==============================================================
==============================================================
====               install docker
====                         4:49
==============================================================
==============================================================



====    note - maybe work through kubectl and minikube using interactive shell first * * * 
script-51-docker-compose.yaml                                                 100%   68     3.3KB/s   00:00    
script-51-kubectl.yaml                                                        100%  373    20.1KB/s   00:00    
docker script



list existing files
cd /home/azureuser
express
output.txt
script-41-server.js
script-51-docker-compose.yaml
script-51-kubectl.yaml
vue25140
vue25150



echo first create docker folder
mkdir docker



move compose.yaml to docker folder



cd docker



Add Docker's official GPG key
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:6 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20230311ubuntu0.22.04.1).
curl is already the newest version (7.81.0-1ubuntu1.16).
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.



Add the repository to Apt sources
sudo apt-get update -y
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Get:5 https://download.docker.com/linux/ubuntu jammy InRelease [48.8 kB]
Hit:6 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:7 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Get:8 https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages [31.1 kB]
Fetched 79.9 kB in 1s (64.8 kB/s)
Reading package lists...



install docker
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  containerd.io docker-buildx-plugin docker-ce-cli docker-ce-rootless-extras
  docker-compose-plugin libltdl7 libslirp0 pigz slirp4netns
Suggested packages:
  aufs-tools cgroupfs-mount | cgroup-lite
The following NEW packages will be installed:
  containerd.io docker-buildx-plugin docker-ce docker-ce-cli
  docker-ce-rootless-extras docker-compose-plugin libltdl7 libslirp0 pigz
  slirp4netns
0 upgraded, 10 newly installed, 0 to remove and 7 not upgraded.
Need to get 121 MB of archives.
After this operation, 434 MB of additional disk space will be used.
Get:1 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 pigz amd64 2.6-1 [63.6 kB]
Get:2 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libltdl7 amd64 2.4.6-15build2 [39.6 kB]
Get:3 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libslirp0 amd64 4.6.1-1build1 [61.5 kB]
Get:4 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 slirp4netns amd64 1.0.1-2 [28.2 kB]
Get:5 https://download.docker.com/linux/ubuntu jammy/stable amd64 containerd.io amd64 1.6.31-1 [29.8 MB]
Get:6 https://download.docker.com/linux/ubuntu jammy/stable amd64 docker-buildx-plugin amd64 0.14.0-1~ubuntu.22.04~jammy [29.7 MB]
Get:7 https://download.docker.com/linux/ubuntu jammy/stable amd64 docker-ce-cli amd64 5:26.1.0-1~ubuntu.22.04~jammy [14.6 MB]
Get:8 https://download.docker.com/linux/ubuntu jammy/stable amd64 docker-ce amd64 5:26.1.0-1~ubuntu.22.04~jammy [25.3 MB]
Get:9 https://download.docker.com/linux/ubuntu jammy/stable amd64 docker-ce-rootless-extras amd64 5:26.1.0-1~ubuntu.22.04~jammy [9320 kB]
Get:10 https://download.docker.com/linux/ubuntu jammy/stable amd64 docker-compose-plugin amd64 2.26.1-1~ubuntu.22.04~jammy [12.4 MB]
Fetched 121 MB in 1s (96.0 MB/s)
Selecting previously unselected package pigz.
(Reading database ... 70952 files and directories currently installed.)
Preparing to unpack .../0-pigz_2.6-1_amd64.deb ...
Unpacking pigz (2.6-1) ...
Selecting previously unselected package containerd.io.
Preparing to unpack .../1-containerd.io_1.6.31-1_amd64.deb ...
Unpacking containerd.io (1.6.31-1) ...
Selecting previously unselected package docker-buildx-plugin.
Preparing to unpack .../2-docker-buildx-plugin_0.14.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-buildx-plugin (0.14.0-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-ce-cli.
Preparing to unpack .../3-docker-ce-cli_5%3a26.1.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-ce-cli (5:26.1.0-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-ce.
Preparing to unpack .../4-docker-ce_5%3a26.1.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-ce (5:26.1.0-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-ce-rootless-extras.
Preparing to unpack .../5-docker-ce-rootless-extras_5%3a26.1.0-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-ce-rootless-extras (5:26.1.0-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package docker-compose-plugin.
Preparing to unpack .../6-docker-compose-plugin_2.26.1-1~ubuntu.22.04~jammy_amd64.deb ...
Unpacking docker-compose-plugin (2.26.1-1~ubuntu.22.04~jammy) ...
Selecting previously unselected package libltdl7:amd64.
Preparing to unpack .../7-libltdl7_2.4.6-15build2_amd64.deb ...
Unpacking libltdl7:amd64 (2.4.6-15build2) ...
Selecting previously unselected package libslirp0:amd64.
Preparing to unpack .../8-libslirp0_4.6.1-1build1_amd64.deb ...
Unpacking libslirp0:amd64 (4.6.1-1build1) ...
Selecting previously unselected package slirp4netns.
Preparing to unpack .../9-slirp4netns_1.0.1-2_amd64.deb ...
Unpacking slirp4netns (1.0.1-2) ...
Setting up docker-buildx-plugin (0.14.0-1~ubuntu.22.04~jammy) ...
Setting up containerd.io (1.6.31-1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/containerd.service → /lib/systemd/system/containerd.service.
Setting up docker-compose-plugin (2.26.1-1~ubuntu.22.04~jammy) ...
Setting up libltdl7:amd64 (2.4.6-15build2) ...
Setting up docker-ce-cli (5:26.1.0-1~ubuntu.22.04~jammy) ...
Setting up libslirp0:amd64 (4.6.1-1build1) ...
Setting up pigz (2.6-1) ...
Setting up docker-ce-rootless-extras (5:26.1.0-1~ubuntu.22.04~jammy) ...
Setting up slirp4netns (1.0.1-2) ...
Setting up docker-ce (5:26.1.0-1~ubuntu.22.04~jammy) ...
Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /lib/systemd/system/docker.service.
Created symlink /etc/systemd/system/sockets.target.wants/docker.socket → /lib/systemd/system/docker.socket.
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.7) ...

Running kernel seems to be up-to-date.

Services to be restarted:
 systemctl restart chrony.service
 systemctl restart cron.service
 systemctl restart multipathd.service
 systemctl restart nginx.service
 systemctl restart packagekit.service
 systemctl restart polkit.service
 systemctl restart serial-getty@ttyS0.service
 systemctl restart snapd.service
 systemctl restart systemd-udevd.service
 systemctl restart walinuxagent.service

Service restarts being deferred:
 /etc/needrestart/restart.d/dbus.service
 systemctl restart getty@tty1.service
 systemctl restart networkd-dispatcher.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.



docker compose version
Docker Compose version v2.26.1



install docker compose
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
100 42.8M  100 42.8M    0     0  22.7M      0  0:00:01  0:00:01 --:--:-- 38.8M



docker compose version
Docker Compose version v2.26.1



docker-compose -v
Docker Compose version v2.12.2



usermod docker



create .docker file



if it gives errors then try this


ls
total 12K
drwxrwxr-x 2 azureuser azureuser 4.0K Apr 28 19:49 .
drwxr-x--- 9 azureuser azureuser 4.0K Apr 28 19:49 ..
-rw-r--r-- 1 azureuser azureuser   68 Apr 28 19:49 script-51-docker-compose.yaml
sudo chmod g+rwx  $ HOME / .docker - R



sudo chmod 666 /var/run/docker.sock



finished block optional if errors arise



docker run hello world
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
c1ec31eb5944: Pulling fs layer
c1ec31eb5944: Verifying Checksum
c1ec31eb5944: Download complete
c1ec31eb5944: Pull complete
Digest: sha256:a26bff933ddc26d5cdf7faa98b4ae1e3ec20c4985e6f87ac0973052224d24302
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/




docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
fdcaa7e87498: Pulling fs layer
fdcaa7e87498: Verifying Checksum
fdcaa7e87498: Download complete
fdcaa7e87498: Pull complete
Digest: sha256:562456a05a0dbd62a671c1854868862a4687bf979a96d48ae8e766642cd911e8
Status: Downloaded newer image for ubuntu:latest
docker.io/library/ubuntu:latest



docker run ubuntu
root
/






printing out shell file which is about to be run inside docker container
echo hello from running docker file by phil anderson the mega scripter



running my script inside docker container



docker exec - run docker interactive shell - commented out for now as we dont want this



docker images
Error response from daemon: No such container: ubuntu
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES



docker running images
CONTAINER ID   IMAGE         COMMAND    CREATED         STATUS                              PORTS     NAMES
4951de61e210   ubuntu        "pwd"      1 second ago    Exited (0) Less than a second ago             tender_engelbart
082cde21a72d   ubuntu        "whoami"   2 seconds ago   Exited (0) Less than a second ago             bold_hamilton
437ccc5fcdff   hello-world   "/hello"   6 seconds ago   Exited (0) 5 seconds ago                      suspicious_mendeleev



docker pull alpine
Using default tag: latest
latest: Pulling from library/alpine
4abcf2066143: Pulling fs layer
4abcf2066143: Verifying Checksum
4abcf2066143: Download complete
4abcf2066143: Pull complete
Digest: sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b
Status: Downloaded newer image for alpine:latest
docker.io/library/alpine:latest
docker run alpine
root



docker pull debian
Using default tag: latest
latest: Pulling from library/debian
1468e7ff95fc: Pulling fs layer
1468e7ff95fc: Verifying Checksum
1468e7ff95fc: Download complete
1468e7ff95fc: Pull complete
Digest: sha256:1aadfee8d292f64b045adb830f8a58bfacc15789ae5f489a0fedcd517a862cb9
Status: Downloaded newer image for debian:latest
docker.io/library/debian:latest



docker run debian
root
/



sudo find / -name docker-compose
/usr/bin/docker-compose
/usr/libexec/docker/cli-plugins/docker-compose



docker compose version



docker compose ps



docker compose up



docker compose up - d
docker: 'compose' is not a docker command.
See 'docker --help'
docker: 'compose' is not a docker command.
See 'docker --help'
docker: 'compose' is not a docker command.
See 'docker --help'



curl localhost
unknown shorthand flag: 'd' in -d
See 'docker --help'.

Usage:  docker [OPTIONS] COMMAND

A self-sufficient runtime for containers

Common Commands:
  run         Create and run a new container from an image
  exec        Execute a command in a running container
  ps          List containers
  build       Build an image from a Dockerfile
  pull        Download an image from a registry
  push        Upload an image to a registry
  images      List images
  login       Log in to a registry
  logout      Log out from a registry
  search      Search Docker Hub for images
  version     Show the Docker version information
  info        Display system-wide information

Management Commands:
  builder     Manage builds
  buildx*     Docker Buildx
  compose*    Docker Compose
  container   Manage containers
  context     Manage contexts
  image       Manage images
  manifest    Manage Docker image manifests and manifest lists
  network     Manage networks
  plugin      Manage plugins
  system      Manage Docker
  trust       Manage trust on Docker images
  volume      Manage volumes

Swarm Commands:
  swarm       Manage Swarm

Commands:
  attach      Attach local standard input, output, and error streams to a running container
  commit      Create a new image from a container's changes
  cp          Copy files/folders between a container and the local filesystem
  create      Create a new container
  diff        Inspect changes to files or directories on a container's filesystem
  events      Get real time events from the server
  export      Export a container's filesystem as a tar archive
  history     Show the history of an image
  import      Import the contents from a tarball to create a filesystem image
  inspect     Return low-level information on Docker objects
  kill        Kill one or more running containers
  load        Load an image from a tar archive or STDIN
  logs        Fetch the logs of a container
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping for the container
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Remove one or more images
  save        Save one or more images to a tar archive (streamed to STDOUT by default)
  start       Start one or more stopped containers
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop one or more running containers
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  wait        Block until one or more containers stop, then print their exit codes

Global Options:
      --config string      Location of client config files (default
                           "/home/azureuser/.docker")
  -c, --context string     Name of the context to use to connect to the
                           daemon (overrides DOCKER_HOST env var and
                           default context set with "docker context use")
  -D, --debug              Enable debug mode
  -H, --host list          Daemon socket to connect to
  -l, --log-level string   Set the logging level ("debug", "info",
                           "warn", "error", "fatal") (default "info")
      --tls                Use TLS; implied by --tlsverify
      --tlscacert string   Trust certs signed only by this CA (default
                           "/home/azureuser/.docker/ca.pem")
      --tlscert string     Path to TLS certificate file (default
                           "/home/azureuser/.docker/cert.pem")
      --tlskey string      Path to TLS key file (default
                           "/home/azureuser/.docker/key.pem")
      --tlsverify          Use TLS and verify the remote
  -v, --version            Print version information and quit

Run 'docker COMMAND --help' for more information on a command.

For more help on how to use Docker, head to https://docs.docker.com/go/guides/

  % Total    % Received % Xferd  Average Speed   Time    Time    <!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>



docker images
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES



docker running images
 Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   612  100   612    0     0   172k      0 --:--:-- --:--:-- --:--:--  199k
CONTAINER ID   IMAGE         COMMAND    CREATED          STATUS                      PORTS     NAMES
f4a8c569cff3   debian        "pwd"      20 seconds ago   Exited (0) 19 seconds ago             happy_villani
81dbbb9bf23c   debian        "whoami"   21 seconds ago   Exited (0) 20 seconds ago             nifty_goodall
d47c183d83d6   alpine        "whoami"   26 seconds ago   Exited (0) 25 seconds ago             lucid_engelbart
4951de61e210   ubuntu        "pwd"      29 seconds ago   Exited (0) 28 seconds ago             tender_engelbart
082cde21a72d   ubuntu        "whoami"   30 seconds ago   Exited (0) 29 seconds ago             bold_hamilton
437ccc5fcdff   hello-world   "/hello"   34 seconds ago   Exited (0) 33 seconds ago             suspicious_mendeleev



end docker script



kubectl script



  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   138  100   138    0     0    871      0 --:--:-- --:--:-- --:--:--   878
100 49.0M  100 49.0M    0     0   117M      0 --:--:-- --:--:-- -


download kubectl checksum
-:--:--  117M
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   138  100   138    0     0    864      0 --:--:-- --:--:-- --:--:--   867
100    64  100    64    0     0    296      0 --:--:-- --:--:-- --:--:--   296



validate kubectl checksum
kubectl: OK



install kubectl



kubectl version
Client Version: v1.30.0
Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3



kubectl detailed version
clientVersion:
  buildDate: "2024-04-17T17:36:05Z"
  compiler: gc
  gitCommit: 7c48c2bd72b9bf5c44d21d7338cc7bea77d0ad2a
  gitTreeState: clean
  gitVersion: v1.30.0
  goVersion: go1.22.2
  major: "1"
  minor: "30"
  platform: linux/amd64
kustomizeVersion: v5.0.4-0.20230601165947-6ce0bf390ce3




return to root directory
mkdir kubectl



move kubectl.yaml to docker folder



cd kubectl



kubectl apply script-51-kubectl.yaml



kubectl get pods
error: error parsing script-51-kubectl.yaml: error converting YAML to JSON: yaml: line 19: found unexpected end of stream



maybe do this via interactive shell first



minikube



return to root directory
download minikube
E0428 19:50:21.681688   18073 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0428 19:50:21.682001   18073 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0428 19:50:21.683253   18073 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0428 19:50:21.683451   18073 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0428 19:50:21.684691   18073 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
The connection to the server localhost:8080 was refused - did you specify the right host or port?
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 91.2M  100 91.2M    0     0  33.0M      0  0:00:02  0:00:02 --:--:-- 30.9M


install minikube
02  0:00:02 --:--:-- 33.0M



start minikube
* minikube v1.33.0 on Ubuntu 22.04
* Automatically selected the docker driver. Other choices: ssh, none

X Exiting due to RSRC_INSUFFICIENT_CORES:  has less than 2 CPUs available, but Kubernetes requires at least 2 to be available




minikube use
minikube can download the appropriate version of kubectl
and you should be able to use it like this minikube kubectl - - get po - A



set minikube alias
alias kubectl=minikube kubectl --



kubectl get po - A



some services eg storage-provisioner may not be running
this is normal during cluster bring-up
this will resolve itself
minkube dashboard shows status of clusters
error: no server found for cluster "minikube"
error: no server found for cluster "minikube"
* Profile "minikube" not found. Run "minikube profile list" to view all profiles.
  To start a cluster, run: "minikube start"
Create a sample deployment and expose it on port 8080:
error: cluster "minikube" does not exist
error: cluster "minikube" does not exist
It may take a moment, but your deployment will soon show up when you run:
error: no server found for cluster "minikube"
The easiest way to access this service is to let minikube launch a web browser for you:
* Profile "minikube" not found. Run "minikube profile list" to view all profiles.
  To start a cluster, run: "minikube start"
Alternatively, use kubectl to forward the port:
error: no server found for cluster "minikube"
Tada! Your application is now available at http://localhost:7080/.
You should be able to see the request metadata in the application output. Try changing the path of the request and observe the changes. Similarly, you can do a POST request and observe the body show up in the output.
Halt the cluster:
* Profile "minikube" not found. Run "minikube profile list" to view all profiles.
  To start a cluster, run: "minikube start"
zsh: no matches found: (requires a restart):
./scriptMasterWindows.sh: line 753: docker: command not found
==============================================================
====                waypoint 51 docker
====                         6:05
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
docker version client 26.1.0
docker version server 26.1.0
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 /home/azureuser
└── (empty)



==============================================================
==============================================================
====               install terraform              ====
====                         6:05
==============================================================
==============================================================



script-52-terraform.tf                                                        100%  147     4.7KB/s   00:00    
script-52-terraform-main.tf                                                   100%  386    13.5KB/s   00:00    
==============================================================
====                    terraform help                    ====
==============================================================
terraform -help



terraform -help plan
zsh: command not found: terraform
==============================================================
====           terraform ... create folders               ====
==============================================================

cd /home/azureuser



ls
zsh: command not found: terraform
docker
express
kubectl
output.txt
script-41-server.js
script-52-terraform-main.tf
script-52-terraform.tf
vue25140
vue25150



mkdir terraform-052-021



mv ./script-52-terraform.tf terraform-052-021



ls
docker
express
kubectl
output.txt
script-41-server.js
script-52-terraform-main.tf
terraform-052-021
vue25140
vue25150



cd terraform-052-021



mv ./script-52-terraform.tf ./main.tf



terraform tutorials
https://medium.com/@sanghpriya785/running-your-first-terraform-hello-world-example-4bd8bb5c3efc
https://www.terraformbyexample.com/hello-world
https://developer.hashicorp.com/terraform/install
https://levelup.gitconnected.com/terraform-hello-world-b4985162cff2
install terraform on linux for azure https://developer.hashicorp.com/terraform/tutorials/azure-get-started/install-cli



==============================================================
====                terraform ... install                 ====
==============================================================
sudo apt-get update
mv: cannot stat 'script-52-terraformtf': No such file or directory


sudo apt-get install gnupg



sudo apt-get install software-properties-common




download terraform binaries
--2024-04-28 19:50:33--  https://apt.releases.hashicorp.com/gpg
Resolving apt.releases.hashicorp.com (apt.releases.hashicorp.com)... 18.245.143.105, 18.245.143.73, 18.245.143.93, ...
Connecting to apt.releases.hashicorp.com (apt.releases.hashicorp.com)|18.245.143.105|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3980 (3.9K) [binary/octet-stream]



report fingerprint
/usr/share/keyrings/hashicorp-archive-keyring.gpg
-------------------------------------------------
pub   rsa4096 2023-01-10 [SC] [expires: 2028-01-09]
      798A EC65 4E5C 1542 8C8E  42EE AA16 FCBC A621 E701
uid           [ unknown] HashiCorp Security (HashiCorp Package Signing) <security+packaging@hashicorp.com>
sub   rsa4096 2023-01-10 [S] [expires: 2028-01-09]




download terraform signing keys
deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com jammy main



sudo apt-get update
Saving to: ‘STDOUT’

     0K ...                                                   100%  299M=0s

2024-04-28 19:50:33 (299 MB/s) - written to stdout [3980/3980]

gpg: directory '/home/azureuser/.gnupg' created
gpg: /home/azureuser/.gnupg/trustdb.gpg: trustdb created



sudo apt-get install terraform



==============================================================
====              terraform ... hello world               ====
==============================================================
ls
script-52-terraform.tf



terraform init 052-098

Initializing the backend...

Initializing provider plugins...
- Finding latest version of hashicorp/null...
- Installing hashicorp/null v3.2.2...
- Installed hashicorp/null v3.2.2 (signed by HashiCorp)

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run "terraform init" in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.



ls
script-52-terraform.tf



terraform apply input false auto approve

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # null_resource.default will be created
  + resource "null_resource" "default" {
      + id = (known after apply)
    }

Plan: 1 to add, 0 to change, 0 to destroy.
null_resource.default: Creating...
null_resource.default: Provisioning with 'local-exec'...
null_resource.default (local-exec): Executing: ["/bin/sh" "-c" "echo 'Hello World' && pwd && whoami && ping -c 4 127.0.0.1"]
null_resource.default (local-exec): Hello World
null_resource.default (local-exec): /home/azureuser/terraform-052-021
null_resource.default (local-exec): azureuser
null_resource.default (local-exec): PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
null_resource.default (local-exec): 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.027 ms
null_resource.default (local-exec): 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.038 ms
null_resource.default (local-exec): 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.038 ms
null_resource.default (local-exec): 64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.040 ms

null_resource.default (local-exec): --- 127.0.0.1 ping statistics ---
null_resource.default (local-exec): 4 packets transmitted, 4 received, 0% packet loss, time 3064ms
null_resource.default (local-exec): rtt min/avg/max/mdev = 0.027/0.035/0.040/0.005 ms
null_resource.default: Creation complete after 3s [id=6543813491452925414]

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.






create a plan with terraform plan out tfplan
null_resource.default: Refreshing state... [id=6543813491452925414]

No changes. Your infrastructure matches the configuration.

Terraform has compared your real infrastructure against your configuration
and found no differences, so no changes are needed.



ls
script-52-terraform.tf
terraform.tfstate
tfplan



terraform apply tfplan
null_resource.default: Refreshing state... [id=6543813491452925414]

No changes. Your infrastructure matches the configuration.

Terraform has compared your real infrastructure against your configuration
and found no differences, so no changes are needed.

Apply complete! Resources: 0 added, 0 changed, 0 destroyed.



terraform apply -input=false -auto-approve -lock=false tfplan

Apply complete! Resources: 0 added, 0 changed, 0 destroyed.



terraform plan -destroy -out=tfplan -input=false -lock=false
null_resource.default: Refreshing state... [id=6543813491452925414]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # null_resource.default will be destroyed
  - resource "null_resource" "default" {
      - id = "6543813491452925414" -> null
    }

Plan: 0 to add, 0 to change, 1 to destroy.

─────────────────────────────────────────────────────────────────────────────

Saved the plan to: tfplan

To perform exactly these actions, run the following command to apply:
    terraform apply "tfplan"



terraform apply -input=false -auto-approve -lock=false tfplan
null_resource.default: Destroying... [id=6543813491452925414]
null_resource.default: Destruction complete after 0s

Apply complete! Resources: 0 added, 0 changed, 1 destroyed.



ls
script-52-terraform.tf
terraform.tfstate
terraform.tfstate.backup
tfplan



screen - d - m to open a new window



screen - d m ./terraformScript.sh
Cannot identify account '.'.



screen - list
There is a screen on:
	19726..ubuntuVm01	(04/28/24 19:50:45)	(Detached)
1 Socket in /run/screen/S-azureuser.



cd /home/azureuser



ls
docker
express
kubectl
output.txt
script-41-server.js
script-52-terraform-main.tf
terraform-052-021
vue25140
vue25150



cd terraform-052-021



ls
script-52-terraform.tf
terraform.tfstate
terraform.tfstate.backup
terraformScript.sh
tfplan



enable tab completion for zsh - only need this for interactive sessions - auto tab complete



install terraform autocomplete - only need this for interactive sessions - auto tab complete




create script 1



chmod 777 script1.sh


echo ... echo hello >> script1.sh



cat ./script1.sh
echo hello world from script1.sh



ls
script-52-terraform.tf
script1.sh
terraform.tfstate
terraform.tfstate.backup
terraformScript.sh
tfplan



nohup script1.sh - does this run in a background process - not sure
hello world from script1.sh



the bash command opens a bash shell
bash



does zsh also work
zsh
==============================================================
====            terraform ... nginx on docker             ====
==============================================================



cd /home/azureuser



mkdir terraform-nginx-on-docker



mv ./script-52-terraform-main.tf terraform-nginx-on-docker



cd terraform-nginx-on-docker



mv ./script-52-terraform-main.tf ./main.tf



terraform init

Initializing the backend...

Initializing provider plugins...
- Finding kreuzwerker/docker versions matching "~> 3.0.1"...
- Installing kreuzwerker/docker v3.0.2...
- Installed kreuzwerker/docker v3.0.2 (self-signed, key ID BD080C4571C6104C)

Partner and community providers are signed by their developers.
If you'd like to know more about provider signing, you can read about it here:
https://www.terraform.io/docs/cli/plugins/signing.html

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run "terraform init" in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.



terraform apply

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # docker_container.nginx will be created
  + resource "docker_container" "nginx" {
      + attach                                      = false
      + bridge                                      = (known after apply)
      + command                                     = (known after apply)
      + container_logs                              = (known after apply)
      + container_read_refresh_timeout_milliseconds = 15000
      + entrypoint                                  = (known after apply)
      + env                                         = (known after apply)
      + exit_code                                   = (known after apply)
      + hostname                                    = (known after apply)
      + id                                          = (known after apply)
      + image                                       = (known after apply)
      + init                                        = (known after apply)
      + ipc_mode                                    = (known after apply)
      + log_driver                                  = (known after apply)
      + logs                                        = false
      + must_run                                    = true
      + name                                        = "tutorial"
      + network_data                                = (known after apply)
      + read_only                                   = false
      + remove_volumes                              = true
      + restart                                     = "no"
      + rm                                          = false
      + runtime                                     = (known after apply)
      + security_opts                               = (known after apply)
      + shm_size                                    = (known after apply)
      + start                                       = true
      + stdin_open                                  = false
      + stop_signal                                 = (known after apply)
      + stop_timeout                                = (known after apply)
      + tty                                         = false
      + wait                                        = false
      + wait_timeout                                = 60

      + ports {
          + external = 8000
          + internal = 80
          + ip       = "0.0.0.0"
          + protocol = "tcp"
        }
    }

  # docker_image.nginx will be created
  + resource "docker_image" "nginx" {
      + id           = (known after apply)
      + image_id     = (known after apply)
      + keep_locally = false
      + name         = "nginx"
      + repo_digest  = (known after apply)
    }

Plan: 2 to add, 0 to change, 0 to destroy.
docker_image.nginx: Creating...
docker_image.nginx: Creation complete after 8s [id=sha256:7383c266ef252ad70806f3072ee8e63d2a16d1e6bafa6146a2da867fc7c41759nginx]
docker_container.nginx: Creating...
docker_container.nginx: Creation complete after 1s [id=56d8ede3915271484955d020a1af8a197d5235045a14df82e69d420f9b87e51d]

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.



docker ps to see running container
CONTAINER ID   IMAGE          COMMAND                  CREATED                  STATUS                  PORTS                  NAMES
56d8ede39152   7383c266ef25   "/docker-entrypoint.…"   Less than a second ago   Up Less than a second   0.0.0.0:8000->80/tcp   tutorial



curl localhost:8000
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   615  100   615    0     0   146k      0 --:--:-- --:--:-- --:--:--  200k
==============================================================
====                waypoint 52 terraform
====                         6:34
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
docker version client 26.1.0
docker version server 26.1.0
terraform version Terraform v1.8.2
on linux_amd64
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 /home/azureuser
└── (empty)



==============================================================
==============================================================
====               install ansible                ====
====                         6:34
==============================================================
==============================================================



script-53-ansible.yaml                                                        100%  196     8.4KB/s   00:00    
script-53-inventory.ini                                                       100%   39     1.6KB/s   00:00    

cd /home/azureuser



mkdir ansible



mv ./script-53-ansible.yaml ansible



cd ansible



mv ./script-53-inventory.ini ./inventory.ini



ansible tutorials
https://www.ansible.com/how-ansible-works/
https://docs.ansible.com/ansible/latest/getting_started/introduction.html




sudo apt update



sudo apt-get install software-properties-common



sudo add-apt-repository --yes --update ppa:ansible/ansible
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:6 https://apt.releases.hashicorp.com jammy InRelease
Get:7 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy InRelease [18.0 kB]
Hit:8 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Hit:9 https://deb.nodesource.com/node_20.x nodistro InRelease
Get:10 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy/main amd64 Packages [1120 B]
Get:11 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy/main Translation-en [752 B]
Fetched 19.9 kB in 1s (14.9 kB/s)
Reading package lists...
Repository: 'deb https://ppa.launchpadcontent.net/ansible/ansible/ubuntu/ jammy main'
Description:
Ansible is a radically simple IT automation platform that makes your applications and systems easier to deploy. Avoid writing scripts or custom code to deploy and update your applications— automate in a language that approaches plain English, using SSH, with no agents to install on remote systems.

http://ansible.com/

If you face any issues while installing Ansible PPA, file an issue here:
https://github.com/ansible-community/ppa/issues
More info: https://launchpad.net/~ansible/+archive/ubuntu/ansible
Adding repository.
Adding deb entry to /etc/apt/sources.list.d/ansible-ubuntu-ansible-jammy.list
Adding disabled deb-src entry to /etc/apt/sources.list.d/ansible-ubuntu-ansible-jammy.list
Adding key to /etc/apt/trusted.gpg.d/ansible-ubuntu-ansible.gpg with fingerprint 6125E2A8C77F2818FB7BD15B93C4A3FD7BB9C367



sudo apt-get install ansible



ansible version
ansible [core 2.16.5]
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/azureuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/azureuser/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible
  python version = 3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0] (/usr/bin/python3)
  jinja version = 3.0.3
  libyaml = True



sudo apt-get install python-pip Python3-pip
Reading package lists...
Building dependency tree...
Reading state information...
E: Unable to locate package Python3-pip
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  build-essential bzip2 cpp cpp-11 dpkg-dev fakeroot g++ g++-11 gcc gcc-11
  gcc-11-base libalgorithm-diff-perl libalgorithm-diff-xs-perl
  libalgorithm-merge-perl libasan6 libatomic1 libc-dev-bin libc-devtools
  libc6-dev libcc1-0 libcrypt-dev libdpkg-perl libfakeroot
  libfile-fcntllock-perl libgcc-11-dev libgomp1 libisl23 libitm1 liblsan0
  libmpc3 libnsl-dev libpython2-stdlib libpython2.7-minimal
  libpython2.7-stdlib libquadmath0 libstdc++-11-dev libtirpc-dev libtsan0
  libubsan1 linux-libc-dev lto-disabled-list make manpages-dev
  python-pkg-resources python-setuptools python2 python2-minimal python2.7
  python2.7-minimal rpcsvc-proto
Suggested packages:
  bzip2-doc cpp-doc gcc-11-locales debian-keyring g++-multilib g++-11-multilib
  gcc-11-doc gcc-multilib autoconf automake libtool flex bison gdb gcc-doc
  gcc-11-multilib glibc-doc bzr libstdc++-11-doc make-doc
  python-setuptools-doc python2-doc python-tk python2.7-doc binfmt-support
Recommended packages:
  python2-dev
The following NEW packages will be installed:
  build-essential bzip2 cpp cpp-11 dpkg-dev fakeroot g++ g++-11 gcc gcc-11
  gcc-11-base libalgorithm-diff-perl libalgorithm-diff-xs-perl
  libalgorithm-merge-perl libasan6 libatomic1 libc-dev-bin libc-devtools
  libc6-dev libcc1-0 libcrypt-dev libdpkg-perl libfakeroot
  libfile-fcntllock-perl libgcc-11-dev libgomp1 libisl23 libitm1 liblsan0
  libmpc3 libnsl-dev libpython2-stdlib libpython2.7-minimal
  libpython2.7-stdlib libquadmath0 libstdc++-11-dev libtirpc-dev libtsan0
  libubsan1 linux-libc-dev lto-disabled-list make manpages-dev python-pip
  python-pkg-resources python-setuptools python2 python2-minimal python2.7
  python2.7-minimal rpcsvc-proto
0 upgraded, 51 newly installed, 0 to remove and 7 not upgraded.
Need to get 67.3 MB of archives.
After this operation, 225 MB of additional disk space will be used.
Get:1 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 libpython2.7-minimal amd64 2.7.18-13ubuntu1.2 [347 kB]
Get:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python2.7-minimal amd64 2.7.18-13ubuntu1.2 [1397 kB]
Get:3 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 python2-minimal amd64 2.7.18-3 [20.8 kB]
Get:4 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 libpython2.7-stdlib amd64 2.7.18-13ubuntu1.2 [1977 kB]
Get:5 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python2.7 amd64 2.7.18-13ubuntu1.2 [250 kB]
Get:6 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 libpython2-stdlib amd64 2.7.18-3 [7432 B]
Get:7 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 python2 amd64 2.7.18-3 [9098 B]
Get:8 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-dev-bin amd64 2.35-0ubuntu3.7 [20.3 kB]
Get:9 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 linux-libc-dev amd64 5.15.0-105.115 [1330 kB]
Get:10 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libcrypt-dev amd64 1:4.4.27-1 [112 kB]
Get:11 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 rpcsvc-proto amd64 1.4.2-0ubuntu6 [68.5 kB]
Get:12 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtirpc-dev amd64 1.3.2-2ubuntu0.1 [192 kB]
Get:13 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libnsl-dev amd64 1.3.0-2build2 [71.3 kB]
Get:14 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc6-dev amd64 2.35-0ubuntu3.7 [2100 kB]
Get:15 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11-base amd64 11.4.0-1ubuntu1~22.04 [20.2 kB]
Get:16 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libisl23 amd64 0.24-2build1 [727 kB]
Get:17 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libmpc3 amd64 1.2.1-2build1 [46.9 kB]
Get:18 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 cpp-11 amd64 11.4.0-1ubuntu1~22.04 [10.0 MB]
Get:19 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 cpp amd64 4:11.2.0-1ubuntu1 [27.7 kB]
Get:20 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcc1-0 amd64 12.3.0-1ubuntu1~22.04 [48.3 kB]
Get:21 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgomp1 amd64 12.3.0-1ubuntu1~22.04 [126 kB]
Get:22 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libitm1 amd64 12.3.0-1ubuntu1~22.04 [30.2 kB]
Get:23 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libatomic1 amd64 12.3.0-1ubuntu1~22.04 [10.4 kB]
Get:24 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libasan6 amd64 11.4.0-1ubuntu1~22.04 [2282 kB]
Get:25 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 liblsan0 amd64 12.3.0-1ubuntu1~22.04 [1069 kB]
Get:26 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtsan0 amd64 11.4.0-1ubuntu1~22.04 [2260 kB]
Get:27 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libubsan1 amd64 12.3.0-1ubuntu1~22.04 [976 kB]
Get:28 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libquadmath0 amd64 12.3.0-1ubuntu1~22.04 [154 kB]
Get:29 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgcc-11-dev amd64 11.4.0-1ubuntu1~22.04 [2517 kB]
Get:30 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11 amd64 11.4.0-1ubuntu1~22.04 [20.1 MB]
Get:31 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 gcc amd64 4:11.2.0-1ubuntu1 [5112 B]
Get:32 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libstdc++-11-dev amd64 11.4.0-1ubuntu1~22.04 [2101 kB]
Get:33 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 g++-11 amd64 11.4.0-1ubuntu1~22.04 [11.4 MB]
Get:34 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 g++ amd64 4:11.2.0-1ubuntu1 [1412 B]
Get:35 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 make amd64 4.3-4.1build1 [180 kB]
Get:36 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libdpkg-perl all 1.21.1ubuntu2.3 [237 kB]
Get:37 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]
Get:38 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 lto-disabled-list all 24 [12.5 kB]
Get:39 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 dpkg-dev all 1.21.1ubuntu2.3 [922 kB]
Get:40 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 build-essential amd64 12.9ubuntu3 [4744 B]
Get:41 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libfakeroot amd64 1.28-1ubuntu1 [31.5 kB]
Get:42 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 fakeroot amd64 1.28-1ubuntu1 [60.4 kB]
Get:43 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-perl all 1.201-1 [41.8 kB]
Get:44 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-xs-perl amd64 0.04-6build3 [11.9 kB]
Get:45 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-merge-perl all 0.08-3 [12.0 kB]
Get:46 http://azure.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-devtools amd64 2.35-0ubuntu3.7 [29.0 kB]
Get:47 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 libfile-fcntllock-perl amd64 0.22-3build7 [33.9 kB]
Get:48 http://azure.archive.ubuntu.com/ubuntu jammy/main amd64 manpages-dev all 5.10-1ubuntu1 [2309 kB]
Get:49 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python-pkg-resources all 44.1.1-1.2ubuntu0.22.04.1 [128 kB]
Get:50 http://azure.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python-setuptools all 44.1.1-1.2ubuntu0.22.04.1 [334 kB]
Get:51 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 python-pip all 20.3.4+dfsg-4 [1021 kB]
Fetched 67.3 MB in 1s (50.6 MB/s)
Selecting previously unselected package libpython2.7-minimal:amd64.
(Reading database ... 93916 files and directories currently installed.)
Preparing to unpack .../0-libpython2.7-minimal_2.7.18-13ubuntu1.2_amd64.deb ...
Unpacking libpython2.7-minimal:amd64 (2.7.18-13ubuntu1.2) ...
Selecting previously unselected package python2.7-minimal.
Preparing to unpack .../1-python2.7-minimal_2.7.18-13ubuntu1.2_amd64.deb ...
Unpacking python2.7-minimal (2.7.18-13ubuntu1.2) ...
Selecting previously unselected package python2-minimal.
Preparing to unpack .../2-python2-minimal_2.7.18-3_amd64.deb ...
Unpacking python2-minimal (2.7.18-3) ...
Selecting previously unselected package libpython2.7-stdlib:amd64.
Preparing to unpack .../3-libpython2.7-stdlib_2.7.18-13ubuntu1.2_amd64.deb ...
Unpacking libpython2.7-stdlib:amd64 (2.7.18-13ubuntu1.2) ...
Selecting previously unselected package python2.7.
Preparing to unpack .../4-python2.7_2.7.18-13ubuntu1.2_amd64.deb ...
Unpacking python2.7 (2.7.18-13ubuntu1.2) ...
Selecting previously unselected package libpython2-stdlib:amd64.
Preparing to unpack .../5-libpython2-stdlib_2.7.18-3_amd64.deb ...
Unpacking libpython2-stdlib:amd64 (2.7.18-3) ...
Setting up libpython2.7-minimal:amd64 (2.7.18-13ubuntu1.2) ...
Setting up python2.7-minimal (2.7.18-13ubuntu1.2) ...
Linking and byte-compiling packages for runtime python2.7...
Setting up python2-minimal (2.7.18-3) ...
Selecting previously unselected package python2.
(Reading database ... 94659 files and directories currently installed.)
Preparing to unpack .../00-python2_2.7.18-3_amd64.deb ...
Unpacking python2 (2.7.18-3) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../01-libc-dev-bin_2.35-0ubuntu3.7_amd64.deb ...
Unpacking libc-dev-bin (2.35-0ubuntu3.7) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../02-linux-libc-dev_5.15.0-105.115_amd64.deb ...
Unpacking linux-libc-dev:amd64 (5.15.0-105.115) ...
Selecting previously unselected package libcrypt-dev:amd64.
Preparing to unpack .../03-libcrypt-dev_1%3a4.4.27-1_amd64.deb ...
Unpacking libcrypt-dev:amd64 (1:4.4.27-1) ...
Selecting previously unselected package rpcsvc-proto.
Preparing to unpack .../04-rpcsvc-proto_1.4.2-0ubuntu6_amd64.deb ...
Unpacking rpcsvc-proto (1.4.2-0ubuntu6) ...
Selecting previously unselected package libtirpc-dev:amd64.
Preparing to unpack .../05-libtirpc-dev_1.3.2-2ubuntu0.1_amd64.deb ...
Unpacking libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...
Selecting previously unselected package libnsl-dev:amd64.
Preparing to unpack .../06-libnsl-dev_1.3.0-2build2_amd64.deb ...
Unpacking libnsl-dev:amd64 (1.3.0-2build2) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../07-libc6-dev_2.35-0ubuntu3.7_amd64.deb ...
Unpacking libc6-dev:amd64 (2.35-0ubuntu3.7) ...
Selecting previously unselected package gcc-11-base:amd64.
Preparing to unpack .../08-gcc-11-base_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking gcc-11-base:amd64 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package libisl23:amd64.
Preparing to unpack .../09-libisl23_0.24-2build1_amd64.deb ...
Unpacking libisl23:amd64 (0.24-2build1) ...
Selecting previously unselected package libmpc3:amd64.
Preparing to unpack .../10-libmpc3_1.2.1-2build1_amd64.deb ...
Unpacking libmpc3:amd64 (1.2.1-2build1) ...
Selecting previously unselected package cpp-11.
Preparing to unpack .../11-cpp-11_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking cpp-11 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package cpp.
Preparing to unpack .../12-cpp_4%3a11.2.0-1ubuntu1_amd64.deb ...
Unpacking cpp (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../13-libcc1-0_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libcc1-0:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libgomp1:amd64.
Preparing to unpack .../14-libgomp1_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libgomp1:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../15-libitm1_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libitm1:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libatomic1:amd64.
Preparing to unpack .../16-libatomic1_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libatomic1:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libasan6:amd64.
Preparing to unpack .../17-libasan6_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libasan6:amd64 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../18-liblsan0_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking liblsan0:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libtsan0:amd64.
Preparing to unpack .../19-libtsan0_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libtsan0:amd64 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package libubsan1:amd64.
Preparing to unpack .../20-libubsan1_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libubsan1:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libquadmath0:amd64.
Preparing to unpack .../21-libquadmath0_12.3.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libquadmath0:amd64 (12.3.0-1ubuntu1~22.04) ...
Selecting previously unselected package libgcc-11-dev:amd64.
Preparing to unpack .../22-libgcc-11-dev_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libgcc-11-dev:amd64 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc-11.
Preparing to unpack .../23-gcc-11_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking gcc-11 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package gcc.
Preparing to unpack .../24-gcc_4%3a11.2.0-1ubuntu1_amd64.deb ...
Unpacking gcc (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package libstdc++-11-dev:amd64.
Preparing to unpack .../25-libstdc++-11-dev_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking libstdc++-11-dev:amd64 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package g++-11.
Preparing to unpack .../26-g++-11_11.4.0-1ubuntu1~22.04_amd64.deb ...
Unpacking g++-11 (11.4.0-1ubuntu1~22.04) ...
Selecting previously unselected package g++.
Preparing to unpack .../27-g++_4%3a11.2.0-1ubuntu1_amd64.deb ...
Unpacking g++ (4:11.2.0-1ubuntu1) ...
Selecting previously unselected package make.
Preparing to unpack .../28-make_4.3-4.1build1_amd64.deb ...
Unpacking make (4.3-4.1build1) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../29-libdpkg-perl_1.21.1ubuntu2.3_all.deb ...
Unpacking libdpkg-perl (1.21.1ubuntu2.3) ...
Selecting previously unselected package bzip2.
Preparing to unpack .../30-bzip2_1.0.8-5build1_amd64.deb ...
Unpacking bzip2 (1.0.8-5build1) ...
Selecting previously unselected package lto-disabled-list.
Preparing to unpack .../31-lto-disabled-list_24_all.deb ...
Unpacking lto-disabled-list (24) ...
Selecting previously unselected package dpkg-dev.
Preparing to unpack .../32-dpkg-dev_1.21.1ubuntu2.3_all.deb ...
Unpacking dpkg-dev (1.21.1ubuntu2.3) ...
Selecting previously unselected package build-essential.
Preparing to unpack .../33-build-essential_12.9ubuntu3_amd64.deb ...
Unpacking build-essential (12.9ubuntu3) ...
Selecting previously unselected package libfakeroot:amd64.
Preparing to unpack .../34-libfakeroot_1.28-1ubuntu1_amd64.deb ...
Unpacking libfakeroot:amd64 (1.28-1ubuntu1) ...
Selecting previously unselected package fakeroot.
Preparing to unpack .../35-fakeroot_1.28-1ubuntu1_amd64.deb ...
Unpacking fakeroot (1.28-1ubuntu1) ...
Selecting previously unselected package libalgorithm-diff-perl.
Preparing to unpack .../36-libalgorithm-diff-perl_1.201-1_all.deb ...
Unpacking libalgorithm-diff-perl (1.201-1) ...
Selecting previously unselected package libalgorithm-diff-xs-perl.
Preparing to unpack .../37-libalgorithm-diff-xs-perl_0.04-6build3_amd64.deb ...
Unpacking libalgorithm-diff-xs-perl (0.04-6build3) ...
Selecting previously unselected package libalgorithm-merge-perl.
Preparing to unpack .../38-libalgorithm-merge-perl_0.08-3_all.deb ...
Unpacking libalgorithm-merge-perl (0.08-3) ...
Selecting previously unselected package libc-devtools.
Preparing to unpack .../39-libc-devtools_2.35-0ubuntu3.7_amd64.deb ...
Unpacking libc-devtools (2.35-0ubuntu3.7) ...
Selecting previously unselected package libfile-fcntllock-perl.
Preparing to unpack .../40-libfile-fcntllock-perl_0.22-3build7_amd64.deb ...
Unpacking libfile-fcntllock-perl (0.22-3build7) ...
Selecting previously unselected package manpages-dev.
Preparing to unpack .../41-manpages-dev_5.10-1ubuntu1_all.deb ...
Unpacking manpages-dev (5.10-1ubuntu1) ...
Selecting previously unselected package python-pkg-resources.
Preparing to unpack .../42-python-pkg-resources_44.1.1-1.2ubuntu0.22.04.1_all.deb ...
Unpacking python-pkg-resources (44.1.1-1.2ubuntu0.22.04.1) ...
Selecting previously unselected package python-setuptools.
Preparing to unpack .../43-python-setuptools_44.1.1-1.2ubuntu0.22.04.1_all.deb ...
Unpacking python-setuptools (44.1.1-1.2ubuntu0.22.04.1) ...
Selecting previously unselected package python-pip.
Preparing to unpack .../44-python-pip_20.3.4+dfsg-4_all.deb ...
Unpacking python-pip (20.3.4+dfsg-4) ...
Setting up gcc-11-base:amd64 (11.4.0-1ubuntu1~22.04) ...
Setting up manpages-dev (5.10-1ubuntu1) ...
Setting up lto-disabled-list (24) ...
Setting up libfile-fcntllock-perl (0.22-3build7) ...
Setting up libalgorithm-diff-perl (1.201-1) ...
Setting up linux-libc-dev:amd64 (5.15.0-105.115) ...
Setting up libgomp1:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up bzip2 (1.0.8-5build1) ...
Setting up libfakeroot:amd64 (1.28-1ubuntu1) ...
Setting up libasan6:amd64 (11.4.0-1ubuntu1~22.04) ...
Setting up libpython2.7-stdlib:amd64 (2.7.18-13ubuntu1.2) ...
Setting up fakeroot (1.28-1ubuntu1) ...
update-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode
Setting up libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...
Setting up rpcsvc-proto (1.4.2-0ubuntu6) ...
Setting up make (4.3-4.1build1) ...
Setting up libquadmath0:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up libmpc3:amd64 (1.2.1-2build1) ...
Setting up libatomic1:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up libdpkg-perl (1.21.1ubuntu2.3) ...
Setting up libubsan1:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up libnsl-dev:amd64 (1.3.0-2build2) ...
Setting up libcrypt-dev:amd64 (1:4.4.27-1) ...
Setting up libisl23:amd64 (0.24-2build1) ...
Setting up libc-dev-bin (2.35-0ubuntu3.7) ...
Setting up libalgorithm-diff-xs-perl (0.04-6build3) ...
Setting up libcc1-0:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up liblsan0:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up libitm1:amd64 (12.3.0-1ubuntu1~22.04) ...
Setting up libc-devtools (2.35-0ubuntu3.7) ...
Setting up libalgorithm-merge-perl (0.08-3) ...
Setting up libtsan0:amd64 (11.4.0-1ubuntu1~22.04) ...
Setting up cpp-11 (11.4.0-1ubuntu1~22.04) ...
Setting up python2.7 (2.7.18-13ubuntu1.2) ...
Setting up libpython2-stdlib:amd64 (2.7.18-3) ...
Setting up python2 (2.7.18-3) ...
Setting up dpkg-dev (1.21.1ubuntu2.3) ...
Setting up libgcc-11-dev:amd64 (11.4.0-1ubuntu1~22.04) ...
Setting up gcc-11 (11.4.0-1ubuntu1~22.04) ...
Setting up cpp (4:11.2.0-1ubuntu1) ...
Setting up libc6-dev:amd64 (2.35-0ubuntu3.7) ...
Setting up python-pkg-resources (44.1.1-1.2ubuntu0.22.04.1) ...
Setting up gcc (4:11.2.0-1ubuntu1) ...
Setting up python-setuptools (44.1.1-1.2ubuntu0.22.04.1) ...
Setting up libstdc++-11-dev:amd64 (11.4.0-1ubuntu1~22.04) ...
Setting up g++-11 (11.4.0-1ubuntu1~22.04) ...
Setting up python-pip (20.3.4+dfsg-4) ...
Setting up g++ (4:11.2.0-1ubuntu1) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
Setting up build-essential (12.9ubuntu3) ...
Processing triggers for man-db (2.10.2-1) ...
Processing triggers for libc-bin (2.35-0ubuntu3.7) ...

Running kernel seems to be up-to-date.

Services to be restarted:
 systemctl restart chrony.service
 systemctl restart cron.service
 systemctl restart multipathd.service
 systemctl restart nginx.service
 systemctl restart packagekit.service
 systemctl restart polkit.service
 systemctl restart serial-getty@ttyS0.service
 systemctl restart snapd.service
 systemctl restart systemd-udevd.service
 systemctl restart walinuxagent.service

Service restarts being deferred:
 /etc/needrestart/restart.d/dbus.service
 systemctl restart getty@tty1.service
 systemctl restart networkd-dispatcher.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.



alternative way to install ansible ... pip install ansible



verify inventory
ansible-inventory -i inventory.ini --list
zsh: command not found: pip
{
    "_meta": {
        "hostvars": {}
    },
    "all": {
        "children": [
            "ungrouped",
            "myhosts"
        ]
    },
    "myhosts": {
        "hosts": [
            "127.0.0.1",
            "8.8.8.8",
            "google.com"
        ]
    }
}



ping hosts in inventory
ansible myhosts -m ping -i inventory.ini
8.8.8.8 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
127.0.0.1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
google.com | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}



run ansible




PLAY [My first play] ***********************************************************

TASK [Gathering Facts] *********************************************************
ok: [127.0.0.1]
ok: [8.8.8.8]
ok: [google.com]

TASK [Print message] ***********************************************************
ok: [127.0.0.1] => {
    "msg": "Hello world"
}
ok: [8.8.8.8] => {
    "msg": "Hello world"
}
ok: [google.com] => {
    "msg": "Hello world"
}

TASK [Ping my hosts] ***********************************************************
ok: [google.com]
ok: [8.8.8.8]
ok: [127.0.0.1]

PLAY RECAP *********************************************************************
127.0.0.1                  : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
8.8.8.8                    : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
google.com                 : ok=3    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

==============================================================
====                waypoint 53 ansible
====                         7:40
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
docker version client 26.1.0
docker version server 26.1.0
terraform version Terraform v1.8.2
on linux_amd64
ansible version ansible [core 2.16.5]
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/azureuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/azureuser/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible
  python version = 3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0] (/usr/bin/python3)
  jinja version = 3.0.3
  libyaml = True
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 /home/azureuser
└── (empty)



==============================================================
==============================================================
====               github actions                 ====
====                         7:40
==============================================================
==============================================================



run all my code on a commit, not just when i want to run it?
https://docs.github.com/en/actions/quickstart



==============================================================
==============================================================
====             problem libraries                ====
====                         7:40
==============================================================
==============================================================



==============================================================
====                waypoint 53 install
====                         7:41
==============================================================
aws cli already installed of version aws-cli/2.15.21 
powershell version PowerShell 7.4.1 already installed
environment cleaned
resource group ResourceGroup02 created
vm ubuntuVm01 ... image Ubuntu2204 .. os ubuntu type debian
vm ubuntuVm01 has ip 51.143.142.33
network security group queried
remote shell version GNU bash, version 5.1.16(1)-release (x86_64-pc-linux-gnu)
linux version VERSION="22.04.4 LTS (Jammy Jellyfish)"
linux os details  Static hostname: ubuntuVm01        Icon name: computer-vm          Chassis: vm       Machine ID: a38da24c73b8472fa033eaa32bae63ba          Boot ID: ef1f3afc28fd41b3866354151c19ec7e   Virtualization: microsoft Operating System: Ubuntu 22.04.4 LTS           Kernel: Linux 6.5.0-1018-azure     Architecture: x86-64  Hardware Vendor: Microsoft Corporation   Hardware Model: Virtual Machine
linux codename VERSION_CODENAME=jammy
linux id_like ID_LIKE=debian
python version Python 3.10.12
python platform version Linux-6.5.0-1018-azure-x86_64-with-glibc2.35
zsh version zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
fish version fish, version 3.7.1
git version git version 2.34.1
node version v20.12.2
npm version 10.5.0
docker version client 26.1.0
docker version server 26.1.0
terraform version Terraform v1.8.2
on linux_amd64
ansible version ansible [core 2.16.5]
  config file = /etc/ansible/ansible.cfg
  configured module search path = ['/home/azureuser/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  ansible collection location = /home/azureuser/.ansible/collections:/usr/share/ansible/collections
  executable location = /usr/bin/ansible
  python version = 3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0] (/usr/bin/python3)
  jinja version = 3.0.3
  libyaml = True
==============================
====      fix these       ====
==============================
apache version 
nginx version 
express version   /home/azureuser
└── (empty)
express version 2 /home/azureuser
└── (empty)



==============================================================
==============================================================
====         list vms and storages                ====
====                         7:41
==============================================================
==============================================================



list vms output to output-azure_vms.txt







==============================================================
==============================================================
====            set auto shutdown                 ====
====                         7:44
==============================================================
==============================================================



setting auto shutdown at 18:00
shut down object name
"shutdown-computevm-ubuntuVm01"
"Enabled"
==============================================================
====        create windows client vm - skipped            ====
====                         7:46
==============================================================



==============================================================
==============================================================
====       list kubernetes skipped                ====
====                         7:46
==============================================================
==============================================================






==============================================================
==============================================================
====          list resource groups                ====
====                         7:46
==============================================================
==============================================================



az vm list
/subscriptions/29a6dc31-f2c3-4caa-a935-2a7158618df5/resourceGroups/ResourceGroup02/providers/Microsoft.Compute/virtualMachines/ubuntuVm01



==============================================================
==============================================================
====               list vms                       ====
====                         7:51
==============================================================
==============================================================






Name        ResourceGroup    Location    Zones
----------  ---------------  ----------  -------
ubuntuVm01  RESOURCEGROUP02  uksouth






==============================================================
==============================================================
====           upload node teaching files                   ====
====                         7:52
==============================================================
==============================================================



script-90-teaching.js                                                         100% 3760   158.7KB/s   00:00    
script-90-package.json                                                        100%  305    12.3KB/s   00:00    



==============================================================
==============================================================
====           install and run teaching node                ====
====                         7:53
==============================================================
==============================================================



zsh



cd /home/azureuser



ls -lah
total 128K
drwxr-x--- 17 azureuser azureuser 4.0K Apr 28 19:52 .
drwxr-xr-x  3 root      root      4.0K Apr 28 19:44 ..
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:51 .ansible
-rw-r--r--  1 azureuser azureuser  220 Jan  6  2022 .bash_logout
-rw-r--r--  1 azureuser azureuser 3.8K Apr 28 19:50 .bashrc
drwx------  2 azureuser azureuser 4.0K Apr 28 19:45 .cache
-rw-rwxr--  1 azureuser azureuser    0 Apr 28 19:49 .docker
drwx------  2 azureuser azureuser 4.0K Apr 28 19:50 .gnupg
drwxr-xr-x 10 azureuser azureuser 4.0K Apr 28 19:50 .minikube
drwxrwxr-x  4 azureuser azureuser 4.0K Apr 28 19:47 .npm
-rw-rw-r--  1 azureuser azureuser    0 Apr 28 19:47 .oh-my-zsh
-rw-r--r--  1 azureuser azureuser  807 Jan  6  2022 .profile
drwx------  2 azureuser azureuser 4.0K Apr 28 19:44 .ssh
-rw-r--r--  1 azureuser azureuser    0 Apr 28 19:45 .sudo_as_admin_successful
drwxr-xr-x  2 azureuser azureuser 4.0K Apr 28 19:50 .terraform.d
-rw-rw-r--  1 azureuser azureuser  181 Apr 28 19:50 .wget-hsts
-rw-rw-r--  1 azureuser azureuser 3.9K Apr 28 19:50 .zshrc
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:51 ansible
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:50 docker
drwxrwxr-x  4 azureuser azureuser 4.0K Apr 28 19:48 express
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:50 kubectl
-rwxrwxrwx  1 azureuser azureuser  22K Apr 28 19:50 output.txt
-rw-r--r--  1 azureuser azureuser  572 Apr 28 19:49 script-41-server.js
-rw-r--r--  1 azureuser azureuser  305 Apr 28 19:52 script-90-package.json
-rwxrwxr-x  1 azureuser azureuser 3.7K Apr 28 19:52 script-90-teaching.js
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:50 terraform-052-021
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:50 terraform-nginx-on-docker
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:48 vue25140
drwxrwxr-x  7 azureuser azureuser 4.0K Apr 28 19:48 vue25150
===================================================================
===================================================================
====             teach node script launcher                    ====
===================================================================
===================================================================



===================================================================
====             install node and npm                          ====
===================================================================
curl - f s S L https://deb.nodesource.com/setup_20.x   sudo - E zsh
2024-04-28 19:52:17 - Installing pre-requisites
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://apt.releases.hashicorp.com jammy InRelease
Hit:6 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:7 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:8 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy InRelease
Hit:9 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20230311ubuntu0.22.04.1).
curl is already the newest version (7.81.0-1ubuntu1.16).
gnupg is already the newest version (2.2.27-3ubuntu2.1).
apt-transport-https is already the newest version (2.4.12).
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
gpg: WARNING: unsafe ownership on homedir '/home/azureuser/.gnupg'
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://apt.releases.hashicorp.com jammy InRelease
Hit:6 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:7 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy InRelease
Hit:8 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Hit:9 https://deb.nodesource.com/node_20.x nodistro InRelease
Reading package lists...
2024-04-28 19:52:23 - Repository configured successfully. To install Node.js, run: apt-get install nodejs -y



curl - f s S L https://deb.nodesource.com/setup_20.x   sudo - E bash
2024-04-28 19:52:23 - Installing pre-requisites
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:6 https://apt.releases.hashicorp.com jammy InRelease
Hit:7 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy InRelease
Hit:8 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Hit:9 https://deb.nodesource.com/node_20.x nodistro InRelease
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20230311ubuntu0.22.04.1).
curl is already the newest version (7.81.0-1ubuntu1.16).
gnupg is already the newest version (2.2.27-3ubuntu2.1).
apt-transport-https is already the newest version (2.4.12).
0 upgraded, 0 newly installed, 0 to remove and 7 not upgraded.
gpg: WARNING: unsafe ownership on homedir '/home/azureuser/.gnupg'
Hit:1 http://azure.archive.ubuntu.com/ubuntu jammy InRelease
Hit:2 http://azure.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu jammy-security InRelease
Hit:5 https://ppa.launchpadcontent.net/ansible/ansible/ubuntu jammy InRelease
Hit:6 https://ppa.launchpadcontent.net/fish-shell/release-3/ubuntu jammy InRelease
Hit:7 https://download.docker.com/linux/ubuntu jammy InRelease
Hit:8 https://apt.releases.hashicorp.com jammy InRelease
Hit:9 https://deb.nodesource.com/node_20.x nodistro InRelease
Reading package lists...
2024-04-28 19:52:28 - Repository configured successfully. To install Node.js, run: apt-get install nodejs -y



E means preserve environment
sudo - E bash downloads, executes with sudo, using bash, preserving the existing environment variables



===================================================================
====                  install node
====      * * *   commands are totally silent        * * *     ====
===================================================================



touch /home/azureuser/output.txt
chmod 777 /home/azureuser/output.txt
totally silent apt get install



totally silent apt get install dialog



totally silent apt get install apt-utils



totally silent apt get install node js - wow! this is the one!!!



node version
v20.12.2
npm version
10.5.0



features learned in logical format - for ease of finding them



sudo mkdir js



ls
ansible
docker
express
js
kubectl
output.txt
script-41-server.js
script-90-package.json
script-90-teaching.js
terraform-052-021
terraform-nginx-on-docker
vue25140
vue25150



mv script 90 teaching.js and package.json to js folder



ls
ansible
docker
express
js
kubectl
output.txt
script-41-server.js
terraform-052-021
terraform-nginx-on-docker
vue25140
vue25150



cd js



ls
script-90-package.json
script-90-teaching.js



chmod 777 script-90-package.json



mv ./script-90-package.json package.json



ls
script-90-package.json
script-90-teaching.js



cat package json
mv: cannot move 'script-90-package.json' to 'package.json': Permission denied
cat: package.json: No such file or directory



==============================================================
====                   npm install                        ====
==============================================================
npm ERR! code EACCES
npm ERR! syscall open
npm==============================================================
====                     run node                         ====
==============================================================
 ERR! path /home/azureuser/js/package-lock.json
npm ERR! errno -13
npm ERR! Error: EACCES: permission denied, open '/home/azureuser/js/package-lock.json'
npm ERR!  [Error: EACCES: permission denied, open '/home/azureuser/js/package-lock.json'] {
npm ERR!   errno: -13,
npm ERR!   code: 'EACCES',
npm ERR!   syscall: 'open',
npm ERR!   path: '/home/azureuser/js/package-lock.json'
npm ERR! }
npm ERR! 
npm ERR! The operation was rejected by your operating system.
npm ERR! It is likely you do not have the permissions to access this file as the current user
npm ERR! 
npm ERR! If you believe this might be a permissions issue, please double-check the
npm ERR! permissions of the file and its containing directories, or try running
npm ERR! the command again as root/Administrator.

npm ERR! A complete log of this run can be found in: /home/azureuser/.npm/_logs/2024-04-28T19_52_32_254Z-debug-0.log
(node:25458) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.
(Use `node --trace-warnings ...` to show where the warning was created)
/home/azureuser/js/script-90-teaching.js:1
import ps from 'ps-node';	 
^^^^^^

SyntaxError: Cannot use import statement outside a module
    at internalCompileFunction (node:internal/vm:128:18)
    at wrapSafe (node:internal/modules/cjs/loader:1280:20)
    at Module._compile (node:internal/modules/cjs/loader:1332:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1427:10)
    at Module.load (node:internal/modules/cjs/loader:1206:32)
    at Module._load (node:internal/modules/cjs/loader:1022:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:135:12)
    at node:internal/main/run_main_module:28:49

Node.js v20.12.2



==============================================================
==============================================================
====              bash scripting a to z                    ====
====                         8:09
==============================================================
==============================================================



zsh
cd /home/azureuser
===================================================================
===================================================================
====                     bash commands                         ====
===================================================================
===================================================================
===================================================================
====                    df disk free                           ====
===================================================================
df
pipe output to tee disk_usage.txt
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        29G  4.5G   25G  16% /
tmpfs           1.7G     0  1.7G   0% /dev/shm
tmpfs           670M  1.1M  669M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
efivarfs        128K   32K   92K  27% /sys/firmware/efi/efivars
/dev/sda15      105M  6.1M   99M   6% /boot/efi
/dev/sdb1       6.8G   28K  6.5G   1% /mnt
tmpfs           335M  4.0K  335M   1% /run/user/1000
===================================================================
====         lsof list processes running                       ====
===================================================================
also list processes on port 3006
===================================================================
====   nohup - no hangup - run command in background process   ====
===================================================================
echo mkdir /home/azureuser/nohup
cd /home/azureuser/nohup



create script 1



chmod 777 script1.sh


echo ... echo hello >> script1.sh



cat ./script1.sh
echo hello world from script1.sh



ls
script1.sh



nohup script1.sh - does this run in a background process - not sure
hello world from script1.sh



cd /home/azureuser
===================================================================
====                  open a new window                        ====
===================================================================
open a terminal works on mac but not linux so will not work here
===================================================================
====                   pid process id                          ====
===================================================================
... get the process id
zsh: command not found: open
===================================================================
====                        ping                               ====
===================================================================
PING localhost (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.022 ms
64 bytes from localhost (127.0.0.1): icmp_seq=2 ttl=64 time=0.038 ms
64 bytes from localhost (127.0.0.1): icmp_seq=3 ttl=64 time=0.041 ms
64 bytes from localhost (127.0.0.1): icmp_seq=4 ttl=64 time=0.042 ms

--- localhost ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3054ms
rtt min/avg/max/mdev = 0.022/0.035/0.042/0.008 ms
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.024 ms
64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.041 ms
64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.042 ms
64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.042 ms

--- 127.0.0.1 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3070ms
rtt min/avg/max/mdev = 0.024/0.037/0.042/0.007 ms
PING google.com (172.217.16.238) 56(84) bytes of data.
64 bytes from lhr48s28-in-f14.1e100.net (172.217.16.238): icmp_seq=1 ttl=115 time=2.41 ms
ping: invalid argument: '::1'
64 bytes from mad08s04-in-f14.1e100.net (172.217.16.238): icmp_seq=2 ttl=115 time=2.45 ms
64 bytes from mad08s04-in-f14.1e100.net (172.217.16.238): icmp_seq=3 ttl=115 time=2.50 ms
64 bytes from mad08s04-in-f14.1e100.net (172.217.16.238): icmp_seq=4 ttl=115 time=2.55 ms

--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3005ms
rtt min/avg/max/mdev = 2.413/2.475/2.546/0.050 ms
===================================================================
====                     ps process                            ====
===================================================================
check if server is already running
azureus+   25539   25518  0 19:52 ?        00:00:00 grep node script-41-server.js
===================================================================
====                        screen                             ====
===================================================================
screen - dm to open a new window
screen - d m myScript.sh



===================================================================
====                        script                             ====
===================================================================
this command stops the script and opens a new interactive window
so dont actually run it now ... or it will stop the script ...
script /dev/null
===================================================================
====                        stat                               ====
===================================================================
stat command shows details about a file
stat file
  File: disk_usage.txt
  Size: 435       	Blocks: 8          IO Block: 4096   regular file
Device: 801h/2049d	Inode: 258373      Links: 1
Access: (0664/-rw-rw-r--)  Uid: ( 1000/azureuser)   Gid: ( 1000/azureuser)
Access: 2024-04-28 19:52:33.285530741 +0000
Modify: 2024-04-28 19:52:33.289530849 +0000
Change: 2024-04-28 19:52:33.289530849 +0000
 Birth: 2024-04-28 19:52:33.285530741 +0000
===================================================================
====                        tail                               ====
===================================================================
tail prints last 10 lines of a file
tail disk_usage.txt
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        29G  4.5G   25G  16% /
tmpfs           1.7G     0  1.7G   0% /dev/shm
tmpfs           670M  1.1M  669M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
efivarfs        128K   32K   92K  27% /sys/firmware/efi/efivars
/dev/sda15      105M  6.1M   99M   6% /boot/efi
/dev/sdb1       6.8G   28K  6.5G   1% /mnt
tmpfs           335M  4.0K  335M   1% /run/user/1000
===================================================================
====           tee - named after plumbing T splitter           ====
====                   write to standard output                ====
====            and one or more files at the same time         ====
===================================================================
df
pipe output to tee disk_usage.txt
Filesystem      Size  Used Avail Use% Mounted on
/dev/root        29G  4.5G   25G  16% /
tmpfs           1.7G     0  1.7G   0% /dev/shm
tmpfs           670M  1.1M  669M   1% /run
tmpfs           5.0M     0  5.0M   0% /run/lock
efivarfs        128K   32K   92K  27% /sys/firmware/efi/efivars
/dev/sda15      105M  6.1M   99M   6% /boot/efi
/dev/sdb1       6.8G   28K  6.5G   1% /mnt
tmpfs           335M  4.0K  335M   1% /run/user/1000






==============================================================
==============================================================
====                     list files                        ====
====                         8:19
==============================================================
==============================================================






ls
ansible
disk_usage.txt
docker
express
js
kubectl
myScript.sh
nohup
output.txt
script-41-server.js
terraform-052-021
terraform-nginx-on-docker
vue25140
vue25150



ls -lah
total 136K
drwxr-x--- 19 azureuser azureuser 4.0K Apr 28 19:52 .
drwxr-xr-x  3 root      root      4.0K Apr 28 19:44 ..
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:51 .ansible
-rw-r--r--  1 azureuser azureuser  220 Jan  6  2022 .bash_logout
-rw-r--r--  1 azureuser azureuser 3.8K Apr 28 19:50 .bashrc
drwx------  2 azureuser azureuser 4.0K Apr 28 19:45 .cache
-rw-rwxr--  1 azureuser azureuser    0 Apr 28 19:49 .docker
drwx------  2 azureuser azureuser 4.0K Apr 28 19:50 .gnupg
drwxr-xr-x 10 azureuser azureuser 4.0K Apr 28 19:50 .minikube
drwxrwxr-x  4 azureuser azureuser 4.0K Apr 28 19:47 .npm
-rw-rw-r--  1 azureuser azureuser    0 Apr 28 19:47 .oh-my-zsh
-rw-r--r--  1 azureuser azureuser  807 Jan  6  2022 .profile
drwx------  2 azureuser azureuser 4.0K Apr 28 19:44 .ssh
-rw-r--r--  1 azureuser azureuser    0 Apr 28 19:45 .sudo_as_admin_successful
drwxr-xr-x  2 azureuser azureuser 4.0K Apr 28 19:50 .terraform.d
-rw-rw-r--  1 azureuser azureuser  181 Apr 28 19:50 .wget-hsts
-rw-rw-r--  1 azureuser azureuser 3.9K Apr 28 19:50 .zshrc
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:51 ansible
-rw-rw-r--  1 azureuser azureuser  435 Apr 28 19:52 disk_usage.txt
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:50 docker
drwxrwxr-x  4 azureuser azureuser 4.0K Apr 28 19:48 express
drwxr-xr-x  2 root      root      4.0K Apr 28 19:52 js
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:50 kubectl
-rw-rw-r--  1 azureuser azureuser   31 Apr 28 19:52 myScript.sh
drwxrwxr-x  2 azureuser azureuser 4.0K Apr 28 19:52 nohup
-rwxrwxrwx  1 azureuser azureuser  23K Apr 28 19:52 output.txt
-rw-r--r--  1 azureuser azureuser  572 Apr 28 19:49 script-41-server.js
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:50 terraform-052-021
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:50 terraform-nginx-on-docker
drwxrwxr-x  3 azureuser azureuser 4.0K Apr 28 19:48 vue25140
drwxrwxr-x  7 azureuser azureuser 4.0K Apr 28 19:48 vue25150






... waiting 2 minutes then deleting all servers and all resource groups so we start from scratch every time ...
=====================================================================
====                  delete resource groups                     ====
====                         10:20
=====================================================================
resource group names are ...
NetworkWatcherRG
ResourceGroup02
NetworkWatcherRG
ResourceGroup02
found a resource group ... with name ... ResourceGroup02
=====================================================================
====                   azure script ended                        ====
====                         13:38
====                  unix time 1714334281
Sun Apr 28 20:58:01 2024
=====================================================================
➜  awsWindows git:(master) ✗ 
